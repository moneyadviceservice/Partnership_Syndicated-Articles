function TinyMCEReadOnlySetup(n,t){n.settings.ROExtHideBars=typeof t!=undefined?t?!0:!1:!1;n.switchReadOnly=function(n){var o,r=this.settings,h,t,i,s,e,u;if(o=document.all&&!document.getElementById?document.all[this.id+"_tbl"]:document.getElementById(this.id+"_tbl"),!r.readonly&&n){var f=null,c=0,l=0,t,i;if(tinymce.isIE)e=tinymce.DOM,u=this.getBody(),e.hide(u),u.contentEditable=!1,e.show(u);else{s=this.getDoc();try{s.designMode="Off"}catch(a){}}if(r.readonly=!0,r.ROExtHideBars){for(i=1;i<=4;i++)t=document.all&&!document.getElementById?document.all[this.id+"_toolbar"+i]:document.getElementById(this.id+"_toolbar"+i),t&&(f||(f=t.offsetParent?t.offsetParent:t.parentNode?t.parentNode:t,typeof f.clientHeight=="number"&&(c=f.clientHeight)),t.style.display="none");t=document.all&&!document.getElementById?document.all[this.id+"_path_row"]:document.getElementById(this.id+"_path_row");t&&(t=t.parentNode,typeof t.clientHeight=="number"&&(l=t.clientHeight),t.parentNode.style.display="none");i=parseInt(o.style.height);r.ROExtHeightWithBars=i;f&&(f.style.height="3px");o.style.height=i-c-l+3+"px"}}else if(r.readonly&&!n){if(h=!1,tinymce.isIE)e=tinymce.DOM,u=this.getBody(),e.hide(u),u.contentEditable=!0,e.show(u);else{s=this.getDoc();try{s.designMode="On"}catch(a){}}if(r.readonly=!1,r.ROExtHideBars){for(i=1;i<=4;i++)t=document.all&&!document.getElementById?document.all[this.id+"_toolbar"+i]:document.getElementById(this.id+"_toolbar"+i),t&&(h||(t.offsetParent?t.offsetParent.style.height="":t.parentNode&&(t.parentNode.style.height=""),h=!0),t.style.display="");t=document.all&&!document.getElementById?document.all[this.id+"_path_row"]:document.getElementById(this.id+"_path_row");t&&(t.parentNode.parentNode.style.display="");typeof r.ROExtHeightWithBars=="number"&&(o.style.height=r.ROExtHeightWithBars+"px")}}return r.readonly};n.settings.readonly&&(n.settings.readonly=!1,n.onInit.add(function(){this.switchReadOnly(!0)}))}function _toConsumableArray(n){if(Array.isArray(n)){for(var t=0,i=Array(n.length);t<n.length;t++)i[t]=n[t];return i}return Array.from(n)}(function(n,t){typeof exports=="object"&&typeof module!="undefined"?t():typeof define=="function"&&define.amd?define(t):t()})(this,function(){"use strict";function f(n){var t=this.constructor;return this.then(function(i){return t.resolve(n()).then(function(){return i})},function(i){return t.resolve(n()).then(function(){return t.reject(i)})})}function h(){}function c(n,t){return function(){n.apply(t,arguments)}}function n(t){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof t!="function")throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=undefined;this._deferreds=[];o(t,this)}function e(i,u){while(i._state===3)i=i._value;if(i._state===0){i._deferreds.push(u);return}i._handled=!0;n._immediateFn(function(){var n=i._state===1?u.onFulfilled:u.onRejected,f;if(n===null){(i._state===1?r:t)(u.promise,i._value);return}try{f=n(i._value)}catch(e){t(u.promise,e);return}r(u.promise,f)})}function r(i,r){try{if(r===i)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var f=r.then;if(r instanceof n){i._state=3;i._value=r;u(i);return}if(typeof f=="function"){o(c(f,r),i);return}}i._state=1;i._value=r;u(i)}catch(e){t(i,e)}}function t(n,t){n._state=2;n._value=t;u(n)}function u(t){t._state===2&&t._deferreds.length===0&&n._immediateFn(function(){t._handled||n._unhandledRejectionFn(t._value)});for(var i=0,r=t._deferreds.length;i<r;i++)e(t,t._deferreds[i]);t._deferreds=null}function l(n,t,i){this.onFulfilled=typeof n=="function"?n:null;this.onRejected=typeof t=="function"?t:null;this.promise=i}function o(n,i){var u=!1;try{n(function(n){u||(u=!0,r(i,n))},function(n){u||(u=!0,t(i,n))})}catch(f){if(u)return;u=!0;t(i,f)}}var s=setTimeout,i;n.prototype["catch"]=function(n){return this.then(null,n)};n.prototype.then=function(n,t){var i=new this.constructor(h);return e(this,new l(n,t,i)),i};n.prototype["finally"]=f;n.all=function(t){return new n(function(n,i){function e(t,u){try{if(u&&(typeof u=="object"||typeof u=="function")){var o=u.then;if(typeof o=="function"){o.call(u,function(n){e(t,n)},i);return}}r[t]=u;--f==0&&n(r)}catch(s){i(s)}}var r,f,u;if(!t||typeof t.length=="undefined")throw new TypeError("Promise.all accepts an array");if(r=Array.prototype.slice.call(t),r.length===0)return n([]);for(f=r.length,u=0;u<r.length;u++)e(u,r[u])})};n.resolve=function(t){return t&&typeof t=="object"&&t.constructor===n?t:new n(function(n){n(t)})};n.reject=function(t){return new n(function(n,i){i(t)})};n.race=function(t){return new n(function(n,i){for(var r=0,u=t.length;r<u;r++)t[r].then(n,i)})};n._immediateFn=typeof setImmediate=="function"&&function(n){setImmediate(n)}||function(n){s(n,0)};n._unhandledRejectionFn=function(n){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",n)};i=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global;throw new Error("unable to locate global object");}();"Promise"in i?i.Promise.prototype["finally"]||(i.Promise.prototype["finally"]=f):i.Promise=n});angular.module("colorpicker.module",[]).factory("Helper",function(){return{closestSlider:function(n){var t=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;return t.bind(n)("I")?n.parentNode:n},getOffset:function(n,t){for(var u=0,f=0,i=0,r=0;n&&!isNaN(n.offsetLeft)&&!isNaN(n.offsetTop);)u+=n.offsetLeft,f+=n.offsetTop,t||n.tagName!=="BODY"?(i+=n.scrollLeft,r+=n.scrollTop):(i+=document.documentElement.scrollLeft||n.scrollLeft,r+=document.documentElement.scrollTop||n.scrollTop),n=n.offsetParent;return{top:f,left:u,scrollX:i,scrollY:r}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(n){return[n[1],n[2],n[3],n[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(n){return[2.55*n[1],2.55*n[2],2.55*n[3],n[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(n){return[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(n){return[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]}}]}}).factory("Color",["Helper",function(n){return{value:{h:1,s:1,b:1,a:1},rgb:function(){var n=this.toRGB();return"rgb("+n.r+","+n.g+","+n.b+")"},rgba:function(){var n=this.toRGB();return"rgba("+n.r+","+n.g+","+n.b+","+n.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(n,t,i,r){n/=255;t/=255;i/=255;var e,o,f,u;return f=Math.max(n,t,i),u=f-Math.min(n,t,i),e=u===0?null:f===n?(t-i)/u:f===t?(i-n)/u+2:(n-t)/u+4,e=(e+360)%6/6,o=u===0?0:u/f,{h:e||1,s:o,b:f,a:r||1}},setColor:function(t){var i;t=t.toLowerCase();for(i in n.stringParsers)if(n.stringParsers.hasOwnProperty(i)){var r=n.stringParsers[i],u=r.re.exec(t),f=u&&r.parse(u);if(f)return this.value=this.RGBtoHSB.apply(null,f),!1}},setHue:function(n){this.value.h=1-n},setSaturation:function(n){this.value.s=n},setLightness:function(n){this.value.b=1-n},setAlpha:function(n){this.value.a=parseInt((1-n)*100,10)/100},toRGB:function(n,t,i,r){n||(n=this.value.h,t=this.value.s,i=this.value.b);n*=360;var e,o,s,f,u;return n=n%360/60,u=i*t,f=u*(1-Math.abs(n%2-1)),e=o=s=i-u,n=~~n,e+=[u,f,0,0,f,u][n],o+=[f,u,u,f,0,0][n],s+=[0,0,f,u,u,f][n],{r:Math.round(e*255),g:Math.round(o*255),b:Math.round(s*255),a:r||this.value.a}},toHex:function(n,t,i,r){var u=this.toRGB(n,t,i,r);return"#"+(16777216|parseInt(u.r,10)<<16|parseInt(u.g,10)<<8|parseInt(u.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(n){var t={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},i={};return{getSlider:function(){return t},getLeftPosition:function(n){return Math.max(0,Math.min(t.maxLeft,t.left+((n.pageX||i.left)-i.left)))},getTopPosition:function(n){return Math.max(0,Math.min(t.maxTop,t.top+((n.pageY||i.top)-i.top)))},setSlider:function(r,u){var e=n.closestSlider(r.target),f=n.getOffset(e,u);t.knob=e.children[0].style;t.left=r.pageX-f.left-window.pageXOffset+f.scrollX;t.top=r.pageY-f.top-window.pageYOffset+f.scrollY;i={left:r.pageX,top:r.pageY}},setSaturation:function(n,i){t={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"};this.setSlider(n,i)},setHue:function(n,i){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"};this.setSlider(n,i)},setAlpha:function(n,i){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"};this.setSlider(n,i)},setKnob:function(n,i){t.knob.top=n+"px";t.knob.left=i+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(n,t,i,r,u){return{require:"?ngModel",restrict:"A",link:function(f,e,o,s){var y=o.colorpicker?o.colorpicker:"hex",a=angular.isDefined(o.colorpickerPosition)?o.colorpickerPosition:"bottom",l=angular.isDefined(o.colorpickerFixedPosition)?o.colorpickerFixedPosition:!1,ot=angular.isDefined(o.colorpickerParent)?e.parent():angular.element(document.body),b=angular.isDefined(o.colorpickerWithInput)?o.colorpickerWithInput:!1,st=b?'<input type="text" name="colorpicker-input">':"",ht='<div class="colorpicker dropdown"><div class="dropdown-menu"><colorpicker-saturation><i><\/i><\/colorpicker-saturation><colorpicker-hue><i><\/i><\/colorpicker-hue><colorpicker-alpha><i><\/i><\/colorpicker-alpha><colorpicker-preview><\/colorpicker-preview>'+st+'<button class="close close-colorpicker">&times;<\/button><\/div><\/div>',h=angular.element(ht),c=i,k,ct=h.find("colorpicker-hue"),nt=h.find("colorpicker-saturation"),tt=h.find("colorpicker-preview"),d=h.find("i"),p,w,et,g;if(t(h)(f),b){p=h.find("input");p.on("mousedown",function(n){n.stopPropagation()}).on("keyup",function(n){var t=this.value;e.val(t);s&&f.$apply(s.$setViewValue(t));n.stopPropagation();n.preventDefault()});e.on("keyup",function(){p.val(e.val())})}if(w=function(){n.on("mousemove",v);n.on("mouseup",rt)},y==="rgba"){h.addClass("alpha");k=h.find("colorpicker-alpha");k.on("click",function(n){r.setAlpha(n,l);v(n)}).on("mousedown",function(n){r.setAlpha(n,l);w()})}ct.on("click",function(n){r.setHue(n,l);v(n)}).on("mousedown",function(n){r.setHue(n,l);w()});nt.on("click",function(n){r.setSaturation(n,l);v(n)}).on("mousedown",function(n){r.setSaturation(n,l);w()});l&&h.addClass("colorpicker-fixed-position");h.addClass("colorpicker-position-"+a);ot.append(h);s&&(s.$render=function(){e.val(s.$viewValue)},f.$watch(o.ngModel,function(){ut()}));e.on("$destroy",function(){h.remove()});var it=function(){try{tt.css("backgroundColor",c[y]())}catch(n){tt.css("backgroundColor",c.toHex())}nt.css("backgroundColor",c.toHex(c.value.h,1,1,1));y==="rgba"&&(k.css.backgroundColor=c.toHex())},v=function(n){var u=r.getLeftPosition(n),o=r.getTopPosition(n),t=r.getSlider(),i;return r.setKnob(o,u),t.callLeft&&c[t.callLeft].call(c,u/100),t.callTop&&c[t.callTop].call(c,o/100),it(),i=c[y](),e.val(i),s&&f.$apply(s.$setViewValue(i)),b&&p.val(i),!1},rt=function(){n.off("mousemove",v);n.off("mouseup",rt)},ut=function(){c.setColor(e.val());d.eq(0).css({left:c.value.s*100+"px",top:100-c.value.b*100+"px"});d.eq(1).css("top",100*(1-c.value.h)+"px");d.eq(2).css("top",100*(1-c.value.a)+"px");it()},lt=function(){var t,n=u.getOffset(e[0]);return angular.isDefined(o.colorpickerParent)&&(n.left=0,n.top=0),a==="top"?t={top:n.top-147,left:n.left}:a==="right"?t={top:n.top,left:n.left+126}:a==="bottom"?t={top:n.top+e[0].offsetHeight+2,left:n.left}:a==="left"&&(t={top:n.top,left:n.left-150}),{top:t.top+"px",left:t.left+"px"}},ft=function(){g()};e.on("click",function(){ut();h.addClass("colorpicker-visible").css(lt());n.on("mousedown",ft)});h.on("mousedown",function(n){n.stopPropagation();n.preventDefault()});et=function(n){s&&f.$emit(n,{name:o.ngModel,value:s.$modelValue})};g=function(){h.hasClass("colorpicker-visible")&&(h.removeClass("colorpicker-visible"),et("colorpicker-closed"),n.off("mousedown",ft))};h.find("button").on("click",function(){g()})}}}]),function(n,t,i){"use strict";function r(){this.$get=function(){function i(n,t,i){for(var f=n[i],e=t(f),r,u;i>0;)if(r=Math.floor((i+1)/2)-1,u=n[r],e>=t(u))break;else n[r]=f,n[i]=u,i=r}function r(n,t,i){for(var e=n.length,o=n[i],s=t(o),h,c,l,a;;){var u=(i+1)*2,f=u-1,r=null;if(f<e&&(h=n[f],c=t(h),c<s&&(r=f)),u<e&&(l=n[u],a=t(l),a<(r===null?s:t(n[f]))&&(r=u)),r===null)break;else n[i]=n[r],n[r]=o,i=r}}function n(n){if(n&&!t.isFunction(n))throw new Error("BinaryHeap(weightFunc): weightFunc: must be a function!");n=n||function(n){return n};this.weightFunc=n;this.heap=[]}return n.prototype.push=function(n){this.heap.push(n);i(this.heap,this.weightFunc,this.heap.length-1)},n.prototype.peek=function(){return this.heap[0]},n.prototype.pop=function(){var n=this.heap[0],t=this.heap.pop();return this.heap.length>0&&(this.heap[0]=t,r(this.heap,this.weightFunc,0)),n},n.prototype.remove=function(n){for(var e,o,f=this.heap.length,u=0;u<f;u++)if(t.equals(this.heap[u],n))return e=this.heap[u],o=this.heap.pop(),u!==f-1&&(this.heap[u]=o,i(this.heap,this.weightFunc,u),r(this.heap,this.weightFunc,u)),e;return null},n.prototype.removeAll=function(){this.heap=[]},n.prototype.size=function(){return this.heap.length},n}}function u(){function n(n,i){t.isNumber(n)?n<0?i("must be greater than zero!"):i(null):i("must be a number!")}var r,u=function(){return{capacity:Number.MAX_VALUE,maxAge:null,deleteOnExpire:"none",onExpire:null,cacheFlushInterval:null,recycleFreq:1e3,storageMode:"none",storageImpl:null,verifyIntegrity:!0,disabled:!1}};this.setCacheDefaults=function(i){var f="$angularCacheFactoryProvider.setCacheDefaults(options): ";if(i=i||{},!t.isObject(i))throw new Error(f+"options: must be an object!");if("disabled"in i&&(i.disabled=i.disabled===!0),"capacity"in i&&n(i.capacity,function(n){if(n)throw new Error(f+"capacity: "+n);}),"deleteOnExpire"in i)if(t.isString(i.deleteOnExpire)){if(i.deleteOnExpire!=="none"&&i.deleteOnExpire!=="passive"&&i.deleteOnExpire!=="aggressive")throw new Error(f+'deleteOnExpire: accepted values are "none", "passive" or "aggressive"!');}else throw new Error(f+"deleteOnExpire: must be a string!");if("maxAge"in i&&n(i.maxAge,function(n){if(n)throw new Error(f+"maxAge: "+n);}),"recycleFreq"in i&&n(i.recycleFreq,function(n){if(n)throw new Error(f+"recycleFreq: "+n);}),"cacheFlushInterval"in i&&n(i.cacheFlushInterval,function(n){if(n)throw new Error(f+"cacheFlushInterval: "+n);}),"storageMode"in i){if(t.isString(i.storageMode)){if(i.storageMode!=="none"&&i.storageMode!=="localStorage"&&i.storageMode!=="sessionStorage")throw new Error(f+'storageMode: accepted values are "none", "localStorage" or "sessionStorage"!');}else throw new Error(f+"storageMode: must be a string!");if("storageImpl"in i)if(t.isObject(i.storageImpl))if("setItem"in i.storageImpl&&typeof i.storageImpl.setItem=="function")if("getItem"in i.storageImpl&&typeof i.storageImpl.getItem=="function"){if(!("removeItem"in i.storageImpl)||typeof i.storageImpl.removeItem!="function")throw new Error(f+'storageImpl: must implement "removeItem(key)"!');}else throw new Error(f+'storageImpl: must implement "getItem(key)"!');else throw new Error(f+'storageImpl: must implement "setItem(key, value)"!');else throw new Error(f+"storageImpl: must be an object!");}if("onExpire"in i&&typeof i.onExpire!="function")throw new Error(f+"onExpire: must be a function!");r=t.extend({},u(),i)};this.setCacheDefaults({});this.$get=["$window","BinaryHeap",function(u,f){function h(n){return n&&t.isNumber(n)?n.toString():n}function c(n){var i={};for(var t in n)n.hasOwnProperty(t)&&(i[t]=t);return i}function o(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t}function l(s,l){function ft(t){n(t,function(n){if(n)throw new Error("capacity: "+n);else for(a.capacity=t;w.size()>a.capacity;)k.remove(w.peek().key,{verifyIntegrity:!1})})}function et(n){if(t.isString(n))if(n!=="none"&&n!=="passive"&&n!=="aggressive")throw new Error('deleteOnExpire: accepted values are "none", "passive" or "aggressive"!');else a.deleteOnExpire=n;else throw new Error("deleteOnExpire: must be a string!");}function ot(t){var i=o(v),r,u;if(t===null){if(a.maxAge)for(r=0;r<i.length;r++)u=i[r],"maxAge"in v[u]||(delete v[u].expires,b.remove(v[u]));a.maxAge=t}else n(t,function(n){var f,u,r;if(n)throw new Error("maxAge: "+n);else if(t!==a.maxAge)for(a.maxAge=t,f=(new Date).getTime(),u=0;u<i.length;u++)r=i[u],"maxAge"in v[r]||(b.remove(v[r]),v[r].expires=v[r].created+a.maxAge,b.push(v[r]),v[r].expires<f&&k.remove(r,{verifyIntegrity:!1}))})}function nt(){for(var t=(new Date).getTime(),n=b.peek();n&&n.expires&&n.expires<t;){if(k.remove(n.key,{verifyIntegrity:!1}),a.onExpire)a.onExpire(n.key,n.value);n=b.peek()}}function st(t){t===null?(a.recycleFreqId&&(clearInterval(a.recycleFreqId),delete a.recycleFreqId),a.recycleFreq=r.recycleFreq,a.recycleFreqId=setInterval(nt,a.recycleFreq)):n(t,function(n){if(n)throw new Error("recycleFreq: "+n);else a.recycleFreq=t,a.recycleFreqId&&clearInterval(a.recycleFreqId),a.recycleFreqId=setInterval(nt,a.recycleFreq)})}function ht(t){t===null?(a.cacheFlushIntervalId&&(clearInterval(a.cacheFlushIntervalId),delete a.cacheFlushIntervalId),a.cacheFlushInterval=t):n(t,function(n){if(n)throw new Error("cacheFlushInterval: "+n);else t!==a.cacheFlushInterval&&(a.cacheFlushIntervalId&&clearInterval(a.cacheFlushIntervalId),a.cacheFlushInterval=t,a.cacheFlushIntervalId=setInterval(k.removeAll,a.cacheFlushInterval))})}function ct(n,i){var f,r;if(t.isString(n)){if(n!=="none"&&n!=="localStorage"&&n!=="sessionStorage")throw new Error('storageMode: accepted values are "none", "localStorage" or "sessionStorage"!');}else throw new Error("storageMode: must be a string!");if((a.storageMode==="localStorage"||a.storageMode==="sessionStorage")&&n!==a.storageMode){for(f=o(v),r=0;r<f.length;r++)y.removeItem(p+".data."+f[r]);y.removeItem(p+".keys")}if(a.storageMode=n,i){if(t.isObject(i))if("setItem"in i&&typeof i.setItem=="function")if("getItem"in i&&typeof i.getItem=="function"){if(!("removeItem"in i)||typeof i.removeItem!="function")throw new Error('storageImpl: must implement "removeItem(key)"!');}else throw new Error('storageImpl: must implement "getItem(key)"!');else throw new Error('storageImpl: must implement "setItem(key, value)"!');else throw new Error("storageImpl: must be an object!");y=i}else a.storageMode==="localStorage"?y=u.localStorage:a.storageMode==="sessionStorage"&&(y=u.sessionStorage);if(a.storageMode!=="none"&&y)if(g)for(f=o(v),r=0;r<f.length;r++)it(f[r]);else lt()}function tt(n,i,u){if(n=n||{},u=u||{},i=!!i,!t.isObject(n))throw new Error("AngularCache.setOptions(cacheOptions, strict, options): cacheOptions: must be an object!");if(d(u.verifyIntegrity),i&&(n=t.extend({},r,n)),"disabled"in n&&(a.disabled=n.disabled===!0),"verifyIntegrity"in n&&(a.verifyIntegrity=n.verifyIntegrity===!0),"capacity"in n&&ft(n.capacity),"deleteOnExpire"in n&&et(n.deleteOnExpire),"maxAge"in n&&ot(n.maxAge),"recycleFreq"in n&&st(n.recycleFreq),"cacheFlushInterval"in n&&ht(n.cacheFlushInterval),"storageMode"in n&&ct(n.storageMode,n.storageImpl),"onExpire"in n){if(n.onExpire!==null&&typeof n.onExpire!="function")throw new Error("onExpire: must be a function!");a.onExpire=n.onExpire}g=!0}function lt(){var i=t.fromJson(y.getItem(p+".keys")),r,u;if(y.removeItem(p+".keys"),i&&i.length){for(r=0;r<i.length;r++){var n=t.fromJson(y.getItem(p+".data."+i[r]))||{},f=n.maxAge||a.maxAge,e=n.deleteOnExpire||a.deleteOnExpire;f&&(new Date).getTime()-n.created>f&&e==="aggressive"?y.removeItem(p+".data."+i[r]):(u={created:n.created},n.expires&&(u.expires=n.expires),n.accessed&&(u.accessed=n.accessed),n.maxAge&&(u.maxAge=n.maxAge),n.deleteOnExpire&&(u.deleteOnExpire=n.deleteOnExpire),k.put(i[r],n.value,u))}it(null)}}function it(n){a.storageMode!=="none"&&y&&(y.setItem(p+".keys",t.toJson(o(v))),n&&y.setItem(p+".data."+n,t.toJson(v[n])))}function d(n){var i,r;if((n||n!==!1&&a.verifyIntegrity)&&a.storageMode!=="none"&&y)for(i=o(v),y.setItem(p+".keys",t.toJson(i)),r=0;r<i.length;r++)y.setItem(p+".data."+i[r],t.toJson(v[i[r]]))}function at(n,i){var r,u,f;(i||i!==!1&&a.verifyIntegrity)&&a.storageMode!=="none"&&y&&(r=y.getItem(p+".data."+n),!r&&n in v?k.remove(n):r&&(u=t.fromJson(r),f=u?u.value:null,f&&k.put(n,f)))}function rt(n){if(a.storageMode!=="none"&&y){var i=n||o(v);y.setItem(p+".keys",t.toJson(i))}}function ut(n){a.storageMode!=="none"&&y&&n in v&&y.setItem(p+".data."+n,t.toJson(v[n]))}function vt(){var i,n;if(a.storageMode!=="none"&&y){for(i=o(v),n=0;n<i.length;n++)y.removeItem(p+".data."+i[n]);y.setItem(p+".keys",t.toJson([]))}}var a=t.extend({},{id:s}),v={},b=new f(function(n){return n.expires}),w=new f(function(n){return n.accessed}),p="angular-cache.caches."+s,g=!1,k=this,y=null;l=l||{};this.put=function(i,r,u){if(!a.disabled){if(u=u||{},i=h(i),t.isString(i)){if(u&&!t.isObject(u))throw new Error("AngularCache.put(key, value, options): options: must be an object!");else if(u.maxAge&&u.maxAge!==null)n(u.maxAge,function(n){if(n)throw new Error("AngularCache.put(key, value, options): maxAge: "+n);});else if(u.deleteOnExpire&&!t.isString(u.deleteOnExpire))throw new Error("AngularCache.put(key, value, options): deleteOnExpire: must be a string!");else if(u.deleteOnExpire&&u.deleteOnExpire!=="none"&&u.deleteOnExpire!=="passive"&&u.deleteOnExpire!=="aggressive")throw new Error('AngularCache.put(key, value, options): deleteOnExpire: accepted values are "none", "passive" or "aggressive"!');else if(t.isUndefined(r))return}else throw new Error("AngularCache.put(key, value, options): key: must be a string!");var e=(new Date).getTime(),o,f;return d(u.verifyIntegrity),v[i]?(b.remove(v[i]),w.remove(v[i])):v[i]={key:i},f=v[i],f.value=r,f.created=parseInt(u.created,10)||f.created||e,f.accessed=parseInt(u.accessed,10)||e,u.deleteOnExpire&&(f.deleteOnExpire=u.deleteOnExpire),u.maxAge&&(f.maxAge=u.maxAge),(f.maxAge||a.maxAge)&&(f.expires=f.created+(f.maxAge||a.maxAge)),o=f.deleteOnExpire||a.deleteOnExpire,f.expires&&o==="aggressive"&&b.push(f),rt(),ut(i),w.push(f),w.size()>a.capacity&&this.remove(w.peek().key,{verifyIntegrity:!1}),r}};this.get=function(n,r){var e,f;if(!a.disabled){if(t.isArray(n))return e=n,f=[],t.forEach(e,function(n){var i=k.get(n,r);t.isDefined(i)&&f.push(i)}),f;if(n=h(n),r=r||{},t.isString(n)){if(r&&!t.isObject(r))throw new Error("AngularCache.get(key, options): options: must be an object!");else if(r.onExpire&&!t.isFunction(r.onExpire))throw new Error("AngularCache.get(key, options): onExpire: must be a function!");}else throw new Error("AngularCache.get(key, options): key: must be a string!");if(at(n,r.verifyIntegrity),n in v){var u=v[n],o=u.value,s=(new Date).getTime(),c=u.deleteOnExpire||a.deleteOnExpire;if(w.remove(u),u.accessed=s,w.push(u),c==="passive"&&"expires"in u&&u.expires<s){if(this.remove(n,{verifyIntegrity:!1}),a.onExpire)a.onExpire(n,u.value,r.onExpire);else if(r.onExpire)r.onExpire(n,u.value);o=i}return ut(n),o}}};this.remove=function(n,t){t=t||{};d(t.verifyIntegrity);w.remove(v[n]);b.remove(v[n]);a.storageMode!=="none"&&y&&y.removeItem(p+".data."+n);delete v[n];rt()};this.removeAll=function(){vt();w.removeAll();b.removeAll();v={}};this.removeExpired=function(n){var t,u,f;n=n||{};var e=(new Date).getTime(),i=o(v),r={};for(t=0;t<i.length;t++)v[i[t]]&&v[i[t]].expires&&v[i[t]].expires<e&&(r[i[t]]=v[i[t]].value);for(u in r)k.remove(u);if(d(n.verifyIntegrity),n.asArray){f=[];for(u in r)f.push(r[u]);return f}return r};this.destroy=function(){var t,n;for(a.cacheFlushIntervalId&&clearInterval(a.cacheFlushIntervalId),a.recycleFreqId&&clearInterval(a.recycleFreqId),this.removeAll(),a.storageMode!=="none"&&y&&(y.removeItem(p+".keys"),y.removeItem(p)),y=null,v=null,w=null,b=null,a=null,p=null,k=null,t=o(this),n=0;n<t.length;n++)this.hasOwnProperty(t[n])&&delete this[t[n]];e[s]=null;delete e[s]};this.info=function(n){if(n){if(v[n]){var i={created:v[n].created,accessed:v[n].accessed,expires:v[n].expires,maxAge:v[n].maxAge||a.maxAge,deleteOnExpire:v[n].deleteOnExpire||a.deleteOnExpire,isExpired:!1};return i.maxAge&&(i.isExpired=(new Date).getTime()-i.created>i.maxAge),i}return v[n]}return t.extend({},a,{size:w&&w.size()||0})};this.keySet=function(){return c(v)};this.keys=function(){return o(v)};this.setOptions=tt;tt(l,!0,{verifyIntegrity:!1})}function s(n,i){if(n in e)throw new Error("cacheId "+n+" taken!");else if(!t.isString(n))throw new Error("cacheId must be a string!");return e[n]=new l(n,i),e[n]}var e={};return s.info=function(){for(var f,n=o(e),i={size:n.length,caches:{}},u=0;u<n.length;u++)f=n[u],i.caches[f]=e[f].info();return i.cacheDefaults=t.extend({},r),i},s.get=function(n){if(!t.isString(n))throw new Error("$angularCacheFactory.get(cacheId): cacheId: must be a string!");return e[n]},s.keySet=function(){return c(e)},s.keys=function(){return o(e)},s.removeAll=function(){for(var t=o(e),n=0;n<t.length;n++)e[t[n]].destroy()},s.clearAll=function(){for(var t=o(e),n=0;n<t.length;n++)e[t[n]].removeAll()},s.enableAll=function(){for(var t=o(e),n=0;n<t.length;n++)e[t[n]].setOptions({disabled:!1})},s.disableAll=function(){for(var t=o(e),n=0;n<t.length;n++)e[t[n]].setOptions({disabled:!0})},s}]}t.module("jmdobry.binary-heap",[]).provider("BinaryHeap",r);t.module("jmdobry.angular-cache",["ng","jmdobry.binary-heap"]).provider("$angularCacheFactory",u)}(window,window.angular),function(){"use strict";function i(n){return angular.isUndefined(n)||n===null}var n={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,COMMAND:91,MAP:{91:"COMMAND",8:"BACKSPACE",9:"TAB",13:"ENTER",16:"SHIFT",17:"CTRL",18:"ALT",19:"PAUSEBREAK",20:"CAPSLOCK",27:"ESC",32:"SPACE",33:"PAGE_UP",34:"PAGE_DOWN",35:"END",36:"HOME",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",43:"+",44:"PRINTSCREEN",45:"INSERT",46:"DELETE",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NUMLOCK",145:"SCROLLLOCK",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},isControl:function(t){var i=t.which;switch(i){case n.COMMAND:case n.SHIFT:case n.CTRL:case n.ALT:return!0}return t.metaKey||t.ctrlKey||t.altKey?!0:!1},isFunctionKey:function(n){return n=n.which?n.which:n,n>=112&&n<=123},isVerticalMovement:function(t){return~[n.UP,n.DOWN].indexOf(t)},isHorizontalMovement:function(t){return~[n.LEFT,n.RIGHT,n.BACKSPACE,n.DELETE].indexOf(t)},toSeparator:function(t){var i={ENTER:"\n",TAB:"\t",SPACE:" "}[t];return i?i:n[t]?undefined:t}},r,t;angular.element.prototype.querySelectorAll===undefined&&(angular.element.prototype.querySelectorAll=function(n){return angular.element(this[0].querySelectorAll(n))});angular.element.prototype.closest===undefined&&(angular.element.prototype.closest=function(n){for(var t=this[0],i=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(i.bind(t)(n))return t;t=t.parentElement}return!1});r=0;t=angular.module("ui.select",[]).constant("uiSelectConfig",{theme:"bootstrap",searchEnabled:!0,sortable:!1,placeholder:"",refreshDelay:1e3,closeOnSelect:!0,skipFocusser:!1,dropdownPosition:"auto",removeSelected:!0,resetSearchInput:!0,generateId:function(){return r++},appendToBody:!1,spinnerEnabled:!1,spinnerClass:"glyphicon glyphicon-refresh ui-select-spin",backspaceReset:!0}).service("uiSelectMinErr",function(){var n=angular.$$minErr("ui.select");return function(){var t=n.apply(this,arguments),i=t.message.replace(new RegExp("\nhttp://errors.angularjs.org/.*"),"");return new Error(i)}}).directive("uisTranscludeAppend",function(){return{link:function(n,t,i,r,u){u(n,function(n){t.append(n)})}}}).filter("highlight",function(){function n(n){return(""+n).replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,i){return i&&t?(""+t).replace(new RegExp(n(i),"gi"),'<span class="ui-select-highlight">$&<\/span>'):t}}).factory("uisOffset",["$document","$window",function(n,t){return function(i){var r=i[0].getBoundingClientRect();return{width:r.width||i.prop("offsetWidth"),height:r.height||i.prop("offsetHeight"),top:r.top+(t.pageYOffset||n[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||n[0].documentElement.scrollLeft)}}}]);t.factory("$$uisDebounce",["$timeout",function(n){return function(t,i){var r;return function(){var u=this,f=Array.prototype.slice.call(arguments);r&&n.cancel(r);r=n(function(){t.apply(u,f)},i)}}}]);t.directive("uiSelectChoices",["uiSelectConfig","uisRepeatParser","uiSelectMinErr","$compile","$window",function(n,t,i,r,u){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-choices");var i=t.parent().attr("theme")||n.theme;return i+"/choices.tpl.html"},compile:function(r,f){var s,l,h,c,e,o,a;if(!f.repeat)throw i("repeat","Expected 'repeat' expression.");if(s=f.groupBy,l=f.groupFilter,s){if(h=r.querySelectorAll(".ui-select-choices-group"),h.length!==1)throw i("rows","Expected 1 .ui-select-choices-group but got '{0}'.",h.length);h.attr("ng-repeat",t.getGroupNgRepeatExpression())}if(c=t.parse(f.repeat),e=r.querySelectorAll(".ui-select-choices-row"),e.length!==1)throw i("rows","Expected 1 .ui-select-choices-row but got '{0}'.",e.length);if(e.attr("ng-repeat",c.repeatExpression(s)).attr("ng-if","$select.open"),o=r.querySelectorAll(".ui-select-choices-row-inner"),o.length!==1)throw i("rows","Expected 1 .ui-select-choices-row-inner but got '{0}'.",o.length);return o.attr("uis-transclude-append",""),a=u.document.addEventListener?e:o,a.attr("ng-click","$select.select("+c.itemName+",$select.skipFocusser,$event)"),function(t,i,u,f){f.parseRepeatAttr(u.repeat,s,l);f.disableChoiceExpression=u.uiDisableChoice;f.onHighlightCallback=u.onHighlight;f.minimumInputLength=parseInt(u.minimumInputLength)||0;f.dropdownPosition=u.position?u.position.toLowerCase():n.dropdownPosition;t.$watch("$select.search",function(n){n&&!f.open&&f.multiple&&f.activate(!1,!0);f.activeIndex=f.tagging.isActivated?-1:0;!u.minimumInputLength||f.search.length>=u.minimumInputLength?f.refresh(u.refresh):f.items=[]});u.$observe("refreshDelay",function(){var i=t.$eval(u.refreshDelay);f.refreshDelay=i!==undefined?i:n.refreshDelay});t.$watch("$select.open",function(n){n?(r.attr("role","listbox"),f.refresh(u.refresh)):i.removeAttr("role")})}}}}]);t.controller("uiSelectCtrl",["$scope","$element","$timeout","$filter","$$uisDebounce","uisRepeatParser","uiSelectMinErr","uiSelectConfig","$parse","$injector","$window",function(t,r,u,f,e,o,s,h,c,l,a){function rt(n,t,i){var u,f,e,r;if(n.findIndex)return n.findIndex(t,i);for(u=Object(n),f=u.length>>>0,r=0;r<f;r++)if(e=u[r],t.call(i,e,r,u))return r;return-1}function b(){v.resetSearchInput&&(v.search=w,v.selected&&v.items.length&&!v.multiple&&(v.activeIndex=rt(v.items,function(n){return angular.equals(this,n)},v.selected)))}function ut(n,t){for(var i,u=[],r=0;r<t.length;r++)for(i=0;i<n.length;i++)n[i].name==[t[r]]&&u.push(n[i]);return u}function ft(n,t){var i=y.indexOf(n);t&&i===-1&&y.push(n);!t&&i>-1&&y.splice(i,1)}function k(n){return y.indexOf(n)>-1}function et(n){function i(n,i){var r=t.indexOf(n);i&&r===-1&&t.push(n);!i&&r>-1&&t.splice(r,1)}function r(n){return t.indexOf(n)>-1}if(n){var t=[];v.isLocked=function(n,t){var u=!1,f=v.selected[t];return f&&(n?(u=!!n.$eval(v.lockChoiceExpression),i(f,u)):u=r(f)),u}}}function ot(t){var f=!0,i,u,r;switch(t){case n.DOWN:if(!v.open&&v.multiple)v.activate(!1,!0);else if(v.activeIndex<v.items.length-1)for(i=++v.activeIndex;k(v.items[i])&&i<v.items.length;)v.activeIndex=++i;break;case n.UP:if(u=v.search.length===0&&v.tagging.isActivated?-1:0,!v.open&&v.multiple)v.activate(!1,!0);else if(v.activeIndex>u)for(r=--v.activeIndex;k(v.items[r])&&r>u;)v.activeIndex=--r;break;case n.TAB:(!v.multiple||v.open)&&v.select(v.items[v.activeIndex],!0);break;case n.ENTER:v.open&&(v.tagging.isActivated||v.activeIndex>=0)?v.select(v.items[v.activeIndex],v.skipFocusser):v.activate(!1,!0);break;case n.ESC:v.close();break;default:f=!1}return f}function it(){var n=r.querySelectorAll(".ui-select-choices-content"),u=n.querySelectorAll(".ui-select-choices-row");if(u.length<1)throw s("choices","Expected multiple .ui-select-choices-row but got '{0}'.",u.length);if(!(v.activeIndex<0)){var t=u[v.activeIndex],i=t.offsetTop+t.clientHeight-n[0].scrollTop,f=n[0].offsetHeight;i>f?n[0].scrollTop+=i-f:i<t.clientHeight&&(v.isGrouped&&v.activeIndex===0?n[0].scrollTop=0:n[0].scrollTop-=t.clientHeight-i)}}var v=this,w="",g,nt,y,p,d,tt;if(v.placeholder=h.placeholder,v.searchEnabled=h.searchEnabled,v.sortable=h.sortable,v.refreshDelay=h.refreshDelay,v.paste=h.paste,v.resetSearchInput=h.resetSearchInput,v.refreshing=!1,v.spinnerEnabled=h.spinnerEnabled,v.spinnerClass=h.spinnerClass,v.removeSelected=h.removeSelected,v.closeOnSelect=!0,v.skipFocusser=!1,v.search=w,v.activeIndex=0,v.items=[],v.open=!1,v.focus=!1,v.disabled=!1,v.selected=undefined,v.dropdownPosition="auto",v.focusser=undefined,v.multiple=undefined,v.disableChoiceExpression=undefined,v.tagging={isActivated:!1,fct:undefined},v.taggingTokens={isActivated:!1,tokens:undefined},v.lockChoiceExpression=undefined,v.clickTriggeredSelect=!1,v.$filter=f,v.$element=r,v.$animate=function(){try{return l.get("$animate")}catch(n){return null}}(),v.searchInput=r.querySelectorAll("input.ui-select-search"),v.searchInput.length!==1)throw s("searchInput","Expected 1 input.ui-select-search but got '{0}'.",v.searchInput.length);v.isEmpty=function(){return i(v.selected)||v.selected===""||v.multiple&&v.selected.length===0};v.activate=function(n,i){var e,o,f;if(v.disabled||v.open)v.open&&!v.searchEnabled&&v.close();else if(i||b(),t.$broadcast("uis:activate"),v.open=!0,v.activeIndex=v.activeIndex>=v.items.length?0:v.activeIndex,v.activeIndex===-1&&v.taggingLabel!==!1&&(v.activeIndex=0),e=r.querySelectorAll(".ui-select-choices-content"),o=r.querySelectorAll(".ui-select-search"),v.$animate&&v.$animate.on&&v.$animate.enabled(e[0]))if(f=function(t,i){i==="start"&&v.items.length===0?(v.$animate.off("removeClass",o[0],f),u(function(){v.focusSearchInput(n)})):i==="close"&&(v.$animate.off("enter",e[0],f),u(function(){v.focusSearchInput(n)}))},v.items.length>0)v.$animate.on("enter",e[0],f);else v.$animate.on("removeClass",o[0],f);else u(function(){v.focusSearchInput(n);!v.tagging.isActivated&&v.items.length>1&&it()})};v.focusSearchInput=function(n){v.search=n||v.search;v.searchInput[0].focus()};v.findGroupByName=function(n){return v.groups&&v.groups.filter(function(t){return t.name===n})[0]};v.parseRepeatAttr=function(n,i,r){function e(n){var f=t.$eval(i),u;v.groups=[];angular.forEach(n,function(n){var t=angular.isFunction(f)?f(n):n[f],i=v.findGroupByName(t);i?i.items.push(n):v.groups.push({name:t,items:[n]})});r&&(u=t.$eval(r),angular.isFunction(u)?v.groups=u(v.groups):angular.isArray(u)&&(v.groups=ut(v.groups,u)));v.items=[];v.groups.forEach(function(n){v.items=v.items.concat(n.items)})}function h(n){v.items=n||[]}v.setItemsFn=i?e:h;v.parserResult=o.parse(n);v.isGrouped=!!i;v.itemProperty=v.parserResult.itemName;var u=v.parserResult.source,f=function(){var n=u(t);t.$uisSource=Object.keys(n).map(function(t){var i={};return i[v.parserResult.keyName]=t,i.value=n[t],i})};v.parserResult.keyName&&(f(),v.parserResult.source=c("$uisSource"+v.parserResult.filters),t.$watch(u,function(n,t){n!==t&&f()},!0));v.refreshItems=function(n){var i,r;n=n||v.parserResult.source(t);i=v.selected;!v.isEmpty()&&(!angular.isArray(i)||i.length)&&v.multiple&&v.removeSelected?n!==undefined&&n!==null&&(r=n.filter(function(n){return angular.isArray(i)?i.every(function(t){return!angular.equals(n,t)}):!angular.equals(n,i)}),v.setItemsFn(r)):v.setItemsFn(n);(v.dropdownPosition==="auto"||v.dropdownPosition==="up")&&t.calculateDropdownPos();t.$broadcast("uis:refresh")};t.$watchCollection(v.parserResult.source,function(n){if(n===undefined||n===null)v.items=[];else if(angular.isArray(n))v.refreshItems(n),angular.isDefined(v.ngModel.$modelValue)&&(v.ngModel.$modelValue=null);else throw s("items","Expected an array but got '{0}'.",n);})};v.refresh=function(n){n!==undefined&&(g&&u.cancel(g),g=u(function(){if(t.$select.search.length>=t.$select.minimumInputLength){var i=t.$eval(n);i&&angular.isFunction(i.then)&&!v.refreshing&&(v.refreshing=!0,i.finally(function(){v.refreshing=!1}))}},v.refreshDelay))};v.isActive=function(n){if(!v.open)return!1;var i=v.items.indexOf(n[v.itemProperty]),t=i==v.activeIndex;return!t||i<0?!1:(t&&!angular.isUndefined(v.onHighlightCallback)&&n.$eval(v.onHighlightCallback),t)};nt=function(n){return v.selected&&angular.isArray(v.selected)&&v.selected.filter(function(t){return angular.equals(t,n)}).length>0};y=[];v.isDisabled=function(n){if(v.open){var i=n[v.itemProperty],r=v.items.indexOf(i),t=!1;if(r>=0&&(angular.isDefined(v.disableChoiceExpression)||v.multiple)){if(i.isTag)return!1;v.multiple&&(t=nt(i));!t&&angular.isDefined(v.disableChoiceExpression)&&(t=!!n.$eval(v.disableChoiceExpression));ft(i,t)}return t}};v.select=function(n,r,u){if(i(n)||!k(n)){if(!v.items&&!v.search&&!v.tagging.isActivated)return;if(!n||!k(n)){if(v.clickTriggeredSelect=!1,u&&(u.type==="click"||u.type==="touchend")&&n&&(v.clickTriggeredSelect=!0),v.tagging.isActivated&&v.clickTriggeredSelect===!1){if(v.taggingLabel===!1)if(v.activeIndex<0){if(n===undefined&&(n=v.tagging.fct!==undefined?v.tagging.fct(v.search):v.search),!n||angular.equals(v.items[0],n))return}else n=v.items[v.activeIndex];else if(v.activeIndex===0){if(n===undefined)return;if(v.tagging.fct!==undefined&&typeof n=="string"){if(n=v.tagging.fct(n),!n)return}else typeof n=="string"&&(n=n.replace(v.taggingLabel,"").trim())}if(nt(n)){v.close(r);return}}b();t.$broadcast("uis:select",n);v.closeOnSelect&&v.close(r)}}};v.close=function(n){v.open&&(v.ngModel&&v.ngModel.$setTouched&&v.ngModel.$setTouched(),v.open=!1,b(),t.$broadcast("uis:close",n))};v.setFocus=function(){v.focus||v.focusInput[0].focus()};v.clear=function(n){v.select(null);n.stopPropagation();u(function(){v.focusser[0].focus()},0,!1)};v.toggle=function(n){v.open?(v.close(),n.preventDefault(),n.stopPropagation()):v.activate()};v.isLocked=function(){return!1};t.$watch(function(){return angular.isDefined(v.lockChoiceExpression)&&v.lockChoiceExpression!==""},et);p=null;d=!1;v.sizeSearchInput=function(){var n=v.searchInput[0],f=v.$element[0],i=function(){return f.clientWidth*!!n.offsetParent},r=function(t){if(t===0)return!1;var i=t-n.offsetLeft;return i<50&&(i=t),v.searchInput.css("width",i+"px"),!0};v.searchInput.css("width","10px");u(function(){p!==null||r(i())||(p=t.$watch(function(){d||(d=!0,t.$$postDigest(function(){d=!1;r(i())&&(p(),p=null)}))},angular.noop))})};v.searchInput.on("keydown",function(i){var r=i.which;~[n.ENTER,n.ESC].indexOf(r)&&(i.preventDefault(),i.stopPropagation());t.$apply(function(){var f=!1,t;if((v.items.length>0||v.tagging.isActivated)&&(ot(r)||v.searchEnabled||(i.preventDefault(),i.stopPropagation()),v.taggingTokens.isActivated)){for(t=0;t<v.taggingTokens.tokens.length;t++)v.taggingTokens.tokens[t]===n.MAP[i.keyCode]&&v.search.length>0&&(f=!0);f&&u(function(){v.searchInput.triggerHandler("tagged");var t=v.search.replace(n.MAP[i.keyCode],"").trim();v.tagging.fct&&(t=v.tagging.fct(t));t&&v.select(t,!0)})}});n.isVerticalMovement(r)&&v.items.length>0&&it();(r===n.ENTER||r===n.ESC)&&(i.preventDefault(),i.stopPropagation())});v.searchInput.on("paste",function(t){var i,r,u,f,e;if(i=window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):(t.originalEvent||t).clipboardData.getData("text/plain"),i=v.search+i,i&&i.length>0)if(v.taggingTokens.isActivated){for(r=[],u=0;u<v.taggingTokens.tokens.length;u++)if(f=n.toSeparator(v.taggingTokens.tokens[u])||v.taggingTokens.tokens[u],i.indexOf(f)>-1){r=i.split(f);break}r.length===0&&(r=[i]);e=v.search;angular.forEach(r,function(n){var t=v.tagging.fct?v.tagging.fct(n):n;t&&v.select(t,!0)});v.search=e||w;t.preventDefault();t.stopPropagation()}else v.paste&&(v.paste(i),v.search=w,t.preventDefault(),t.stopPropagation())});v.searchInput.on("tagged",function(){u(function(){b()})});tt=e(function(){v.sizeSearchInput()},50);angular.element(a).bind("resize",tt);t.$on("$destroy",function(){v.searchInput.off("keyup keydown tagged blur paste");angular.element(a).off("resize",tt)});t.$watch("$select.activeIndex",function(n){n&&r.find("input").attr("aria-activedescendant","ui-select-choices-row-"+v.generatedId+"-"+n)});t.$watch("$select.open",function(n){n||r.find("input").removeAttr("aria-activedescendant")})}]);t.directive("uiSelect",["$document","uiSelectConfig","uiSelectMinErr","uisOffset","$compile","$parse","$timeout",function(n,t,i,r,u,f,e){return{restrict:"EA",templateUrl:function(n,i){var r=i.theme||t.theme;return r+(angular.isDefined(i.multiple)?"/select-multiple.tpl.html":"/select.tpl.html")},replace:!0,transclude:!0,require:["uiSelect","^ngModel"],scope:!0,controller:"uiSelectCtrl",controllerAs:"$select",compile:function(u,o){var s=/{(.*)}\s*{(.*)}/.exec(o.ngClass),h;return s&&(h="{"+s[1]+", "+s[2]+"}",o.ngClass=h,u.attr("ng-class",h)),angular.isDefined(o.multiple)?u.append("<ui-select-multiple/>").removeAttr("multiple"):u.append("<ui-select-single/>"),o.inputId&&(u.querySelectorAll("input.ui-select-search")[0].id=o.inputId),function(u,o,s,h,c){function b(n){var i,t,f,r;l.open&&(i=!1,i=window.jQuery?window.jQuery.contains(o[0],n.target):o[0].contains(n.target),i||l.clickTriggeredSelect||(l.skipFocusser?t=!0:(f=["input","button","textarea","select"],r=angular.element(n.target).controller("uiSelect"),t=r&&r!==l,t||(t=~f.indexOf(n.target.tagName.toLowerCase()))),l.close(t),u.$digest()),l.clickTriggeredSelect=!1)}function it(){var t=r(o);v=angular.element('<div class="ui-select-placeholder"><\/div>');v[0].style.width=t.width+"px";v[0].style.height=t.height+"px";o.after(v);w=o[0].style.width;n.find("body").append(o);o[0].style.position="absolute";o[0].style.left=t.left+"px";o[0].style.top=t.top+"px";o[0].style.width=t.width+"px"}function k(){v!==null&&(v.replaceWith(o),v=null,o[0].style.position="",o[0].style.left="",o[0].style.top="",o[0].style.width=w,l.setFocus())}var l=h[0],tt=h[1],p,v,w,a,y;l.generatedId=t.generateId();l.baseTitle=s.title||"Select box";l.focusserTitle=l.baseTitle+" focus";l.focusserId="focusser-"+l.generatedId;l.closeOnSelect=function(){return angular.isDefined(s.closeOnSelect)?f(s.closeOnSelect)():t.closeOnSelect}();u.$watch("skipFocusser",function(){var n=u.$eval(s.skipFocusser);l.skipFocusser=n!==undefined?n:t.skipFocusser});l.onSelectCallback=f(s.onSelect);l.onRemoveCallback=f(s.onRemove);l.ngModel=tt;l.choiceGrouped=function(n){return l.isGrouped&&n&&n.name};s.tabindex&&s.$observe("tabindex",function(n){l.focusInput.attr("tabindex",n);o.removeAttr("tabindex")});u.$watch(function(){return u.$eval(s.searchEnabled)},function(n){l.searchEnabled=n!==undefined?n:t.searchEnabled});u.$watch("sortable",function(){var n=u.$eval(s.sortable);l.sortable=n!==undefined?n:t.sortable});s.$observe("backspaceReset",function(){var n=u.$eval(s.backspaceReset);l.backspaceReset=n!==undefined?n:!0});s.$observe("limit",function(){l.limit=angular.isDefined(s.limit)?parseInt(s.limit,10):undefined});u.$watch("removeSelected",function(){var n=u.$eval(s.removeSelected);l.removeSelected=n!==undefined?n:t.removeSelected});s.$observe("disabled",function(){l.disabled=s.disabled!==undefined?s.disabled:!1});s.$observe("resetSearchInput",function(){var n=u.$eval(s.resetSearchInput);l.resetSearchInput=n!==undefined?n:!0});s.$observe("paste",function(){l.paste=u.$eval(s.paste)});s.$observe("tagging",function(){if(s.tagging!==undefined){var n=u.$eval(s.tagging);l.tagging={isActivated:!0,fct:n!==!0?n:undefined}}else l.tagging={isActivated:!1,fct:undefined}});s.$observe("taggingLabel",function(){s.tagging!==undefined&&(l.taggingLabel=s.taggingLabel==="false"?!1:s.taggingLabel!==undefined?s.taggingLabel:"(new)")});s.$observe("taggingTokens",function(){if(s.tagging!==undefined){var n=s.taggingTokens!==undefined?s.taggingTokens.split("|"):[",","ENTER"];l.taggingTokens={isActivated:!0,tokens:n}}});s.$observe("spinnerEnabled",function(){var n=u.$eval(s.spinnerEnabled);l.spinnerEnabled=n!==undefined?n:t.spinnerEnabled});s.$observe("spinnerClass",function(){var n=s.spinnerClass;l.spinnerClass=n!==undefined?s.spinnerClass:t.spinnerClass});angular.isDefined(s.autofocus)&&e(function(){l.setFocus()});angular.isDefined(s.focusOn)&&u.$on(s.focusOn,function(){e(function(){l.setFocus()})});n.on("click",b);u.$on("$destroy",function(){n.off("click",b)});c(u,function(n){var f=angular.element("<div>").append(n),r=f.querySelectorAll(".ui-select-match"),t,u;if(r.removeAttr("ui-select-match"),r.removeAttr("data-ui-select-match"),r.length!==1)throw i("transcluded","Expected 1 .ui-select-match but got '{0}'.",r.length);if(o.querySelectorAll(".ui-select-match").replaceWith(r),t=f.querySelectorAll(".ui-select-choices"),t.removeAttr("ui-select-choices"),t.removeAttr("data-ui-select-choices"),t.length!==1)throw i("transcluded","Expected 1 .ui-select-choices but got '{0}'.",t.length);o.querySelectorAll(".ui-select-choices").replaceWith(t);u=f.querySelectorAll(".ui-select-no-choice");u.removeAttr("ui-select-no-choice");u.removeAttr("data-ui-select-no-choice");u.length==1&&o.querySelectorAll(".ui-select-no-choice").replaceWith(u)});p=u.$eval(s.appendToBody);(p!==undefined?p:t.appendToBody)&&(u.$watch("$select.open",function(n){n?it():k()}),u.$on("$destroy",function(){k()}));v=null;w="";a=null;y="direction-up";u.$watch("$select.open",function(){(l.dropdownPosition==="auto"||l.dropdownPosition==="up")&&u.calculateDropdownPos()});var d=function(n,t){n=n||r(o);t=t||r(a);a[0].style.position="absolute";a[0].style.top=t.height*-1+"px";o.addClass(y)},rt=function(n,t){o.removeClass(y);n=n||r(o);t=t||r(a);a[0].style.position="";a[0].style.top=""},g=function(){e(function(){if(l.dropdownPosition==="up")d();else{o.removeClass(y);var t=r(o),i=r(a),u=n[0].documentElement.scrollTop||n[0].body.scrollTop;t.top+t.height+i.height>u+n[0].documentElement.clientHeight?d(t,i):rt(t,i)}a[0].style.opacity=1})},nt=!1;u.calculateDropdownPos=function(){if(l.open){if(a=angular.element(o).querySelectorAll(".ui-select-dropdown"),a.length===0)return;if(l.search!==""||nt||(a[0].style.opacity=0,nt=!0),!r(a).height&&l.$animate&&l.$animate.on&&l.$animate.enabled(a)){var n=!0;l.$animate.on("enter",a,function(t,i){i==="close"&&n&&(g(),n=!1)})}else g()}else{if(a===null||a.length===0)return;a[0].style.opacity=0;a[0].style.position="";a[0].style.top="";o.removeClass(y)}}}}}}]);t.directive("uiSelectMatch",["uiSelectConfig",function(n){function t(n,t){return n[0].hasAttribute(t)?n.attr(t):n[0].hasAttribute("data-"+t)?n.attr("data-"+t):n[0].hasAttribute("x-"+t)?n.attr("x-"+t):void 0}return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(i){i.addClass("ui-select-match");var r=i.parent(),u=t(r,"theme")||n.theme,f=angular.isDefined(t(r,"multiple"));return u+(f?"/match-multiple.tpl.html":"/match.tpl.html")},link:function(t,i,r,u){function f(n){u.allowClear=angular.isDefined(n)?n===""?!0:n.toLowerCase()==="true":!1}u.lockChoiceExpression=r.uiLockChoice;r.$observe("placeholder",function(t){u.placeholder=t!==undefined?t:n.placeholder});r.$observe("allowClear",f);f(r.allowClear);u.multiple&&u.sizeSearchInput()}}}]);t.directive("uiSelectMultiple",["uiSelectMinErr","$timeout",function(t,r){return{restrict:"EA",require:["^uiSelect","^ngModel"],controller:["$scope","$timeout",function(n,t){var r=this,i=n.$select,u;angular.isUndefined(i.selected)&&(i.selected=[]);n.$evalAsync(function(){u=n.ngModel});r.activeMatchIndex=-1;r.updateModel=function(){u.$setViewValue(Date.now());r.refreshComponent()};r.refreshComponent=function(){i.refreshItems&&i.refreshItems();i.sizeSearchInput&&i.sizeSearchInput()};r.removeChoice=function(u){if(i.isLocked(null,u))return!1;var f=i.selected[u],e={};return e[i.parserResult.itemName]=f,i.selected.splice(u,1),r.activeMatchIndex=-1,i.sizeSearchInput(),t(function(){i.onRemoveCallback(n,{$item:f,$model:i.parserResult.modelMapper(n,e)})}),r.updateModel(),!0};r.getPlaceholder=function(){if(!i.selected||!i.selected.length)return i.placeholder}}],controllerAs:"$selectMultiple",link:function(u,f,e,o){function v(n){return angular.isNumber(n.selectionStart)?n.selectionStart:n.value.length}function y(t){function l(){switch(t){case n.LEFT:return~h.activeMatchIndex?f:r;case n.RIGHT:return~h.activeMatchIndex&&i!==r?c:(s.activate(),!1);case n.BACKSPACE:return~h.activeMatchIndex?h.removeChoice(i)?f:i:r;case n.DELETE:return~h.activeMatchIndex?(h.removeChoice(h.activeMatchIndex),i):!1}}var e=v(s.searchInput[0]),o=s.selected.length,r=o-1,i=h.activeMatchIndex,c=h.activeMatchIndex+1,f=h.activeMatchIndex-1,u=i;return e>0||s.search.length&&t==n.RIGHT?!1:(s.close(),u=l(),h.activeMatchIndex=s.selected.length&&u!==!1?Math.min(r,Math.max(0,u)):-1,!0)}function l(n){if(n===undefined||s.search===undefined)return!1;return n.filter(function(n){return s.search.toUpperCase()===undefined||n===undefined?!1:n.toUpperCase()===s.search.toUpperCase()}).length>0}function a(n,t){var f=-1,r,i,u;if(angular.isArray(n))for(r=angular.copy(n),i=0;i<r.length;i++)s.tagging.fct===undefined?r[i]+" "+s.taggingLabel===t&&(f=i):(u=r[i],angular.isObject(u)&&(u.isTag=!0),angular.equals(u,t)&&(f=i));return f}var s=o[0],c=u.ngModel=o[1],h=u.$selectMultiple;s.multiple=!0;s.focusInput=s.searchInput;c.$isEmpty=function(n){return!n||n.length===0};c.$parsers.unshift(function(){for(var n={},i,r=[],t=s.selected.length-1;t>=0;t--)n={},n[s.parserResult.itemName]=s.selected[t],i=s.parserResult.modelMapper(u,n),r.unshift(i);return r});c.$formatters.unshift(function(n){var e=s.parserResult&&s.parserResult.source(u,{$select:{search:""}}),o={},r,t,f,i;if(!e)return n;if(t=[],f=function(n,i){var f,h,e;if(n&&n.length){for(f=n.length-1;f>=0;f--)if((o[s.parserResult.itemName]=n[f],r=s.parserResult.modelMapper(u,o),s.parserResult.trackByExp&&(h=/(\w*)\./.exec(s.parserResult.trackByExp),e=/\.([^\s]+)/.exec(s.parserResult.trackByExp),h&&h.length>0&&h[1]==s.parserResult.itemName&&e&&e.length>0&&r[e[1]]==i[e[1]]))||angular.equals(r,i))return t.unshift(n[f]),!0;return!1}},!n)return t;for(i=n.length-1;i>=0;i--)f(s.selected,n[i])||f(e,n[i])||t.unshift(n[i]);return t});u.$watchCollection(function(){return c.$modelValue},function(n,t){t!=n&&(angular.isDefined(c.$modelValue)&&(c.$modelValue=null),h.refreshComponent())});c.$render=function(){if(!angular.isArray(c.$viewValue))if(i(c.$viewValue))c.$viewValue=[];else throw t("multiarr","Expected model value to be array but got '{0}'",c.$viewValue);s.selected=c.$viewValue;h.refreshComponent();u.$evalAsync()};u.$on("uis:select",function(n,t){if(!(s.selected.length>=s.limit)){s.selected.push(t);var i={};i[s.parserResult.itemName]=t;r(function(){s.onSelectCallback(u,{$item:t,$model:s.parserResult.modelMapper(u,i)})});h.updateModel()}});u.$on("uis:activate",function(){h.activeMatchIndex=-1});u.$watch("$select.disabled",function(n,t){t&&!n&&s.sizeSearchInput()});s.searchInput.on("keydown",function(t){var i=t.which;u.$apply(function(){var r=!1;n.isHorizontalMovement(i)&&(r=y(i));r&&i!=n.TAB&&(t.preventDefault(),t.stopPropagation())})});s.searchInput.on("keyup",function(t){if(n.isVerticalMovement(t.which)||u.$evalAsync(function(){s.activeIndex=s.taggingLabel===!1?-1:0}),s.tagging.isActivated&&s.search.length>0){if(t.which===n.TAB||n.isControl(t)||n.isFunctionKey(t)||t.which===n.ESC||n.isVerticalMovement(t.which))return;if(s.activeIndex=s.taggingLabel===!1?-1:0,s.taggingLabel===!1)return;var i=angular.copy(s.items),r=angular.copy(s.items),f,v,o=!1,c=-1,e,h;if(s.tagging.fct!==undefined){if(e=s.$filter("filter")(i,{isTag:!0}),e.length>0&&(h=e[0]),i.length>0&&h&&(o=!0,i=i.slice(1,i.length),r=r.slice(1,r.length)),f=s.tagging.fct(s.search),r.some(function(n){return angular.equals(n,f)})||s.selected.some(function(n){return angular.equals(n,f)})){u.$evalAsync(function(){s.activeIndex=0;s.items=i});return}f&&(f.isTag=!0)}else{if(e=s.$filter("filter")(i,function(n){return n.match(s.taggingLabel)}),e.length>0&&(h=e[0]),v=i[0],v!==undefined&&i.length>0&&h&&(o=!0,i=i.slice(1,i.length),r=r.slice(1,r.length)),f=s.search+" "+s.taggingLabel,a(s.selected,s.search)>-1)return;if(l(r.concat(s.selected))){o&&(i=r,u.$evalAsync(function(){s.activeIndex=0;s.items=i}));return}if(l(r)){o&&(s.items=r.slice(1,r.length));return}}o&&(c=a(s.selected,f));c>-1?i=i.slice(c+1,i.length-1):(i=[],f&&i.push(f),i=i.concat(r));u.$evalAsync(function(){if(s.activeIndex=0,s.items=i,s.isGrouped){var n=f?i.slice(1):i;s.setItemsFn(n);f&&(s.items.unshift(f),s.groups.unshift({name:"",items:[f],tagging:!0}))}})}});s.searchInput.on("blur",function(){r(function(){h.activeMatchIndex=-1})})}}}]);t.directive("uiSelectNoChoice",["uiSelectConfig",function(n){return{restrict:"EA",require:"^uiSelect",replace:!0,transclude:!0,templateUrl:function(t){t.addClass("ui-select-no-choice");var i=t.parent().attr("theme")||n.theme;return i+"/no-choice.tpl.html"}}}]);t.directive("uiSelectSingle",["$timeout","$compile",function(t,r){return{restrict:"EA",require:["^uiSelect","^ngModel"],link:function(u,f,e,o){var s=o[0],c=o[1],h;c.$parsers.unshift(function(n){if(i(n))return n;var t={};return t[s.parserResult.itemName]=n,s.parserResult.modelMapper(u,t)});c.$formatters.unshift(function(n){var t,f,o,e,r;if(i(n))return n;if(t=s.parserResult&&s.parserResult.source(u,{$select:{search:""}}),f={},t){if(e=function(t){return f[s.parserResult.itemName]=t,o=s.parserResult.modelMapper(u,f),o===n},s.selected&&e(s.selected))return s.selected;for(r=t.length-1;r>=0;r--)if(e(t[r]))return t[r]}return n});u.$watch("$select.selected",function(n){c.$viewValue!==n&&c.$setViewValue(n)});c.$render=function(){s.selected=c.$viewValue};u.$on("uis:select",function(n,r){s.selected=r;var f={};f[s.parserResult.itemName]=r;t(function(){s.onSelectCallback(u,{$item:r,$model:i(r)?r:s.parserResult.modelMapper(u,f)})})});u.$on("uis:close",function(n,i){t(function(){s.focusser.prop("disabled",!1);i||s.focusser[0].focus()},0,!1)});u.$on("uis:activate",function(){h.prop("disabled",!0)});h=angular.element("<input ng-disabled='$select.disabled' class='ui-select-focusser ui-select-offscreen' type='text' id='{{ $select.focusserId }}' aria-label='{{ $select.focusserTitle }}' aria-haspopup='true' role='button' />");r(h)(u);s.focusser=h;s.focusInput=h;f.parent().append(h);h.bind("focus",function(){u.$evalAsync(function(){s.focus=!0})});h.bind("blur",function(){u.$evalAsync(function(){s.focus=!1})});h.bind("keydown",function(t){if(t.which===n.BACKSPACE&&s.backspaceReset!==!1){t.preventDefault();t.stopPropagation();s.select(undefined);u.$apply();return}t.which===n.TAB||n.isControl(t)||n.isFunctionKey(t)||t.which===n.ESC||((t.which==n.DOWN||t.which==n.UP||t.which==n.ENTER||t.which==n.SPACE)&&(t.preventDefault(),t.stopPropagation(),s.activate()),u.$digest())});h.bind("keyup input",function(t){t.which===n.TAB||n.isControl(t)||n.isFunctionKey(t)||t.which===n.ESC||t.which==n.ENTER||t.which===n.BACKSPACE||(s.activate(h.val()),h.val(""),u.$digest())})}}}]);t.directive("uiSelectSort",["$timeout","uiSelectConfig","uiSelectMinErr",function(n,t,i){return{require:["^^uiSelect","^ngModel"],link:function(t,r,u,f){if(t[u.uiSelectSort]===null)throw i("sort","Expected a list to sort");var a=f[0],w=f[1],b=angular.extend({axis:"horizontal"},t.$eval(u.uiSelectSortOptions)),v=b.axis,h="dragging",c="dropping",o="dropping-before",s="dropping-after";t.$watch(function(){return a.sortable},function(n){n?r.attr("draggable",!0):r.removeAttr("draggable")});r.on("dragstart",function(n){r.addClass(h);(n.dataTransfer||n.originalEvent.dataTransfer).setData("text",t.$index.toString())});r.on("dragend",function(){e(h)});var k=function(n,t){this.splice(t,0,this.splice(n,1)[0])},e=function(n){angular.forEach(a.$element.querySelectorAll("."+n),function(t){angular.element(t).removeClass(n)})},y=function(n){n.preventDefault();var t=v==="vertical"?n.offsetY||n.layerY||(n.originalEvent?n.originalEvent.offsetY:0):n.offsetX||n.layerX||(n.originalEvent?n.originalEvent.offsetX:0);t<this[v==="vertical"?"offsetHeight":"offsetWidth"]/2?(e(s),r.addClass(o)):(e(o),r.addClass(s))},p,l=function(t){t.preventDefault();var i=parseInt((t.dataTransfer||t.originalEvent.dataTransfer).getData("text"),10);n.cancel(p);p=n(function(){d(i)},20)},d=function(n){var i=t.$eval(u.uiSelectSort),h=i[n],f=null;f=r.hasClass(o)?n<t.$index?t.$index-1:t.$index:n<t.$index?t.$index:t.$index+1;k.apply(i,[n,f]);w.$setViewValue(Date.now());t.$apply(function(){t.$emit("uiSelectSort:change",{array:i,item:h,from:n,to:f})});e(c);e(o);e(s);r.off("drop",l)};r.on("dragenter",function(){if(!r.hasClass(h)){r.addClass(c);r.on("dragover",y);r.on("drop",l)}});r.on("dragleave",function(n){n.target==r&&(e(c),e(o),e(s),r.off("dragover",y),r.off("drop",l))})}}}]);t.directive("uisOpenClose",["$parse","$timeout",function(n,t){return{restrict:"A",require:"uiSelect",link:function(i,r,u,f){f.onOpenCloseCallback=n(u.uisOpenClose);i.$watch("$select.open",function(n,r){n!==r&&t(function(){f.onOpenCloseCallback(i,{isOpen:n})})})}}}]);t.service("uisRepeatParser",["uiSelectMinErr","$parse",function(n,t){var i=this;i.parse=function(i){var r,u,f,e;if(r=i.match(/^\s*(?:([\s\S]+?)\s+as\s+)?(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(\s*[\s\S]+?)?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),!r)throw n("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",i);return u=r[5],f="",r[3]&&(u=r[5].replace(/(^\()|(\)$)/g,""),e=r[5].match(/^\s*(?:[\s\S]+?)(?:[^\|]|\|\|)+([\s\S]*)\s*$/),e&&e[1].trim()&&(f=e[1],u=u.replace(f,""))),{itemName:r[4]||r[2],keyName:r[3],source:t(u),filters:f,trackByExp:r[6],modelMapper:t(r[1]||r[4]||r[2]),repeatExpression:function(n){var t=this.itemName+" in "+(n?"$group.items":"$select.items");return this.trackByExp&&(t+=" track by "+this.trackByExp),t}}};i.getGroupNgRepeatExpression=function(){return"$group in $select.groups track by $group.name"}}])}();angular.module("ui.select").run(["$templateCache",function(n){n.put("bootstrap/choices.tpl.html",'<ul class="ui-select-choices ui-select-choices-content ui-select-dropdown dropdown-menu" ng-show="$select.open && $select.items.length > 0"><li class="ui-select-choices-group" id="ui-select-choices-{{ $select.generatedId }}"><div class="divider" ng-show="$select.isGrouped && $index > 0"><\/div><div ng-show="$select.isGrouped" class="ui-select-choices-group-label dropdown-header" ng-bind="$group.name"><\/div><div ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}" role="option"><span class="ui-select-choices-row-inner"><\/span><\/div><\/li><\/ul>');n.put("bootstrap/match-multiple.tpl.html",'<span class="ui-select-match"><span ng-repeat="$item in $select.selected track by $index"><span class="ui-select-match-item btn btn-default btn-xs" tabindex="-1" type="button" ng-disabled="$select.disabled" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'btn-primary\':$selectMultiple.activeMatchIndex === $index, \'select-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span class="close ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&nbsp;&times;<\/span> <span uis-transclude-append=""><\/span><\/span><\/span><\/span>');n.put("bootstrap/match.tpl.html",'<div class="ui-select-match" ng-hide="$select.open && $select.searchEnabled" ng-disabled="$select.disabled" ng-class="{\'btn-default-focus\':$select.focus}"><span tabindex="-1" class="btn btn-default form-control ui-select-toggle" aria-label="{{ $select.baseTitle }} activate" ng-disabled="$select.disabled" ng-click="$select.activate()" style="outline: 0;"><span ng-show="$select.isEmpty()" class="ui-select-placeholder text-muted">{{$select.placeholder}}<\/span> <span ng-hide="$select.isEmpty()" class="ui-select-match-text pull-left" ng-class="{\'ui-select-allow-clear\': $select.allowClear && !$select.isEmpty()}" ng-transclude=""><\/span> <i class="caret pull-right" ng-click="$select.toggle($event)"><\/i> <a ng-show="$select.allowClear && !$select.isEmpty() && ($select.disabled !== true)" aria-label="{{ $select.baseTitle }} clear" style="margin-right: 10px" ng-click="$select.clear($event)" class="btn btn-xs btn-link pull-right"><i class="glyphicon glyphicon-remove" aria-hidden="true"><\/i><\/a><\/span><\/div>');n.put("bootstrap/no-choice.tpl.html",'<ul class="ui-select-no-choice dropdown-menu" ng-show="$select.items.length == 0"><li ng-transclude=""><\/li><\/ul>');n.put("bootstrap/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple ui-select-bootstrap dropdown form-control" ng-class="{open: $select.open}"><div><div class="ui-select-match"><\/div><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" class="ui-select-search input-xs" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-click="$select.activate()" ng-model="$select.search" role="combobox" aria-expanded="{{$select.open}}" aria-label="{{$select.baseTitle}}" ng-class="{\'spinner\': $select.refreshing}" ondrop="return false;"><\/div><div class="ui-select-choices"><\/div><div class="ui-select-no-choice"><\/div><\/div>');n.put("bootstrap/select.tpl.html",'<div class="ui-select-container ui-select-bootstrap dropdown" ng-class="{open: $select.open}"><div class="ui-select-match"><\/div><span ng-show="$select.open && $select.refreshing && $select.spinnerEnabled" class="ui-select-refreshing {{$select.spinnerClass}}"><\/span> <input type="search" autocomplete="off" tabindex="-1" aria-expanded="true" aria-label="{{ $select.baseTitle }}" aria-owns="ui-select-choices-{{ $select.generatedId }}" class="form-control ui-select-search" ng-class="{ \'ui-select-search-hidden\' : !$select.searchEnabled }" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-show="$select.open"><div class="ui-select-choices"><\/div><div class="ui-select-no-choice"><\/div><\/div>');n.put("select2/choices.tpl.html",'<ul tabindex="-1" class="ui-select-choices ui-select-choices-content select2-results"><li class="ui-select-choices-group" ng-class="{\'select2-result-with-children\': $select.choiceGrouped($group) }"><div ng-show="$select.choiceGrouped($group)" class="ui-select-choices-group-label select2-result-label" ng-bind="$group.name"><\/div><ul id="ui-select-choices-{{ $select.generatedId }}" ng-class="{\'select2-result-sub\': $select.choiceGrouped($group), \'select2-result-single\': !$select.choiceGrouped($group) }"><li role="option" ng-attr-id="ui-select-choices-row-{{ $select.generatedId }}-{{$index}}" class="ui-select-choices-row" ng-class="{\'select2-highlighted\': $select.isActive(this), \'select2-disabled\': $select.isDisabled(this)}"><div class="select2-result-label ui-select-choices-row-inner"><\/div><\/li><\/ul><\/li><\/ul>');n.put("select2/match-multiple.tpl.html",'<span class="ui-select-match"><li class="ui-select-match-item select2-search-choice" ng-repeat="$item in $select.selected track by $index" ng-class="{\'select2-search-choice-focus\':$selectMultiple.activeMatchIndex === $index, \'select2-locked\':$select.isLocked(this, $index)}" ui-select-sort="$select.selected"><span uis-transclude-append=""><\/span> <a href="javascript:;" class="ui-select-match-close select2-search-choice-close" ng-click="$selectMultiple.removeChoice($index)" tabindex="-1"><\/a><\/li><\/span>');n.put("select2/match.tpl.html",'<a class="select2-choice ui-select-match" ng-class="{\'select2-default\': $select.isEmpty()}" ng-click="$select.toggle($event)" aria-label="{{ $select.baseTitle }} select"><span ng-show="$select.isEmpty()" class="select2-chosen">{{$select.placeholder}}<\/span> <span ng-hide="$select.isEmpty()" class="select2-chosen" ng-transclude=""><\/span> <abbr ng-if="$select.allowClear && !$select.isEmpty()" class="select2-search-choice-close" ng-click="$select.clear($event)"><\/abbr> <span class="select2-arrow ui-select-toggle"><b><\/b><\/span><\/a>');n.put("select2/no-choice.tpl.html",'<div class="ui-select-no-choice dropdown" ng-show="$select.items.length == 0"><div class="dropdown-content"><div data-selectable="" ng-transclude=""><\/div><\/div><\/div>');n.put("select2/select-multiple.tpl.html",'<div class="ui-select-container ui-select-multiple select2 select2-container select2-container-multi" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled}"><ul class="select2-choices"><span class="ui-select-match"><\/span><li class="select2-search-field"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" aria-activedescendant="ui-select-choices-row-{{ $select.generatedId }}-{{ $select.activeIndex }}" class="select2-input ui-select-search" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-disabled="$select.disabled" ng-hide="$select.disabled" ng-model="$select.search" ng-click="$select.activate()" style="width: 34px;" ondrop="return false;"><\/li><\/ul><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open || $select.items.length === 0}"><div class="ui-select-choices"><\/div><\/div><\/div>');n.put("select2/select.tpl.html",'<div class="ui-select-container select2 select2-container" ng-class="{\'select2-container-active select2-dropdown-open open\': $select.open, \'select2-container-disabled\': $select.disabled, \'select2-container-active\': $select.focus, \'select2-allowclear\': $select.allowClear && !$select.isEmpty()}"><div class="ui-select-match"><\/div><div class="ui-select-dropdown select2-drop select2-with-searchbox select2-drop-active" ng-class="{\'select2-display-none\': !$select.open}"><div class="search-container" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled, \'select2-search\':$select.searchEnabled}"><input type="search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" ng-class="{\'select2-active\': $select.refreshing}" role="combobox" aria-expanded="true" aria-owns="ui-select-choices-{{ $select.generatedId }}" aria-label="{{ $select.baseTitle }}" class="ui-select-search select2-input" ng-model="$select.search"><\/div><div class="ui-select-choices"><\/div><div class="ui-select-no-choice"><\/div><\/div><\/div>');n.put("selectize/choices.tpl.html",'<div ng-show="$select.open" class="ui-select-choices ui-select-dropdown selectize-dropdown" ng-class="{\'single\': !$select.multiple, \'multi\': $select.multiple}"><div class="ui-select-choices-content selectize-dropdown-content"><div class="ui-select-choices-group optgroup"><div ng-show="$select.isGrouped" class="ui-select-choices-group-label optgroup-header" ng-bind="$group.name"><\/div><div role="option" class="ui-select-choices-row" ng-class="{active: $select.isActive(this), disabled: $select.isDisabled(this)}"><div class="option ui-select-choices-row-inner" data-selectable=""><\/div><\/div><\/div><\/div><\/div>');n.put("selectize/match-multiple.tpl.html",'<div class="ui-select-match" data-value="" ng-repeat="$item in $select.selected track by $index" ng-click="$selectMultiple.activeMatchIndex = $index;" ng-class="{\'active\':$selectMultiple.activeMatchIndex === $index}" ui-select-sort="$select.selected"><span class="ui-select-match-item" ng-class="{\'select-locked\':$select.isLocked(this, $index)}"><span uis-transclude-append=""><\/span> <span class="remove ui-select-match-close" ng-hide="$select.disabled" ng-click="$selectMultiple.removeChoice($index)">&times;<\/span><\/span><\/div>');n.put("selectize/match.tpl.html",'<div ng-hide="$select.searchEnabled && ($select.open || $select.isEmpty())" class="ui-select-match"><span ng-show="!$select.searchEnabled && ($select.isEmpty() || $select.open)" class="ui-select-placeholder text-muted">{{$select.placeholder}}<\/span> <span ng-hide="$select.isEmpty() || $select.open" ng-transclude=""><\/span><\/div>');n.put("selectize/no-choice.tpl.html",'<div class="ui-select-no-choice selectize-dropdown" ng-show="$select.items.length == 0"><div class="selectize-dropdown-content"><div data-selectable="" ng-transclude=""><\/div><\/div><\/div>');n.put("selectize/select-multiple.tpl.html",'<div class="ui-select-container selectize-control multi plugin-remove_button" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"><\/div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" placeholder="{{$selectMultiple.getPlaceholder()}}" ng-model="$select.search" ng-disabled="$select.disabled" aria-expanded="{{$select.open}}" aria-label="{{ $select.baseTitle }}" ondrop="return false;"><\/div><div class="ui-select-choices"><\/div><div class="ui-select-no-choice"><\/div><\/div>');n.put("selectize/select.tpl.html",'<div class="ui-select-container selectize-control single" ng-class="{\'open\': $select.open}"><div class="selectize-input" ng-class="{\'focus\': $select.open, \'disabled\': $select.disabled, \'selectize-focus\' : $select.focus}" ng-click="$select.open && !$select.searchEnabled ? $select.toggle($event) : $select.activate()"><div class="ui-select-match"><\/div><input type="search" autocomplete="off" tabindex="-1" class="ui-select-search ui-select-toggle" ng-class="{\'ui-select-search-hidden\':!$select.searchEnabled}" ng-click="$select.toggle($event)" placeholder="{{$select.placeholder}}" ng-model="$select.search" ng-hide="!$select.isEmpty() && !$select.open" ng-disabled="$select.disabled" aria-label="{{ $select.baseTitle }}"><\/div><div class="ui-select-choices"><\/div><div class="ui-select-no-choice"><\/div><\/div>')}]);angular.module("RecursionHelper",[]).factory("RecursionHelper",["$compile",function(n){return{compile:function(t,i){angular.isFunction(i)&&(i={post:i});var u=t.contents().remove(),r;return{pre:i&&i.pre?i.pre:null,post:function(t,f){r||(r=n(u));r(t,function(n){f.append(n)});i&&i.post&&i.post.apply(null,arguments)}}}}}]),function(n){var t={queue:[],addDirective:function(n){this.queue.push(n)}},i=n.module("ngCssInjector",[]);new Promise(function(t){i.factory("cssInjector",["$timeout","$document","$templateRequest",function(i,r,u){function h(n){return n.replace(s,function(n,t){return(t?"-":"")+n.toLowerCase()})}function o(t,i){r.find("body").append(n.element("<style>").attr("id","directive-"+i).text(t))}function c(t){var i=h(t.name);t.index>0&&(i+="-"+t.index);i in f||(f[i]=t,"css"in t?o(t.css,i):"cssUrl"in t&&u(t.cssUrl).then(function(n){o(n,i)},n.noop))}var f={},s=/[A-Z]/g,e={addDirective:function(n){i(c,0,!1,n)}};return i(t,0,!1,e),e}])}).then(function(n){t.queue.forEach(n.addDirective,n);t=n});i.decorator("$injector",["$delegate",function(n){function r(n){("css"in n||"cssUrl"in n)&&t.addDirective(n)}var i=n.invoke;return n.invoke=function(){var n=i.apply(this,arguments);return n&&arguments.length===1&&r(n),n},n}]).run(["cssInjector",function(){}])}(angular);angular.module("ui.select2",[]).value("uiSelect2Config",{}).directive("uiSelect2",["uiSelect2Config","$timeout",function(n,t){var i={};return n&&angular.extend(i,n),{require:"ngModel",priority:1,compile:function(n,r){var e,u,o,f=n.is("select"),s=angular.isDefined(r.multiple);return n.is("select")&&(u=n.find("option[ng-repeat], option[data-ng-repeat]"),u.length&&(o=u.attr("ng-repeat")||u.attr("data-ng-repeat"),e=jQuery.trim(o.split("|")[0]).split(" ").pop())),function(n,u,o,h){var c=angular.extend({},i,n.$eval(o.uiSelect2)),l=function(n){var t;return c.simple_tags?(t=[],angular.forEach(n,function(n){t.push(n.id)})):t=n,t},v=function(n){var t=[];return n?(c.simple_tags?(t=[],angular.forEach(n,function(n){t.push({id:n,text:n})})):t=n,t):t},a;f?(delete c.multiple,delete c.initSelection):s&&(c.multiple=!0);h&&(n.$watch(r.ngModel,function(n,i){n&&n!==i&&(h.$render(),t(function(){h.$selectRender()},0))},!0),h.$selectRender=h.$render=function(){if(f)u.select2("val",h.$viewValue);else if(c.multiple){var n=h.$viewValue;angular.isString(n)&&(n=n.split(","));u.select2("data",v(n))}else angular.isObject(h.$viewValue)?u.select2("data",h.$viewValue):h.$viewValue?u.select2("val",h.$viewValue):u.select2("data",null)},e&&n.$watch(e,function(n,i){angular.equals(n,i)||i===undefined||i.length===0||t(function(){u.select2("val",h.$viewValue);u.trigger("change");n&&!i&&h.$setPristine&&h.$setPristine(!0)})}),h.$parsers.push(function(n){var t=u.prev();return t.toggleClass("ng-invalid",!h.$valid).toggleClass("ng-valid",h.$valid).toggleClass("ng-invalid-required",!h.$valid).toggleClass("ng-valid-required",h.$valid).toggleClass("ng-dirty",h.$dirty).toggleClass("ng-pristine",h.$pristine),n}),f||(u.bind("change",function(t){(t.stopImmediatePropagation(),n.$$phase||n.$root.$$phase)||n.$apply(function(){h.$setViewValue(l(u.select2("data")))})}),c.initSelection&&(a=c.initSelection,c.initSelection=function(n,t){a(n,function(n){var i=h.$pristine;h.$setViewValue(l(n));t(n);i&&h.$setPristine();u.prev().toggleClass("ng-pristine",h.$pristine)})})));u.bind("$destroy",function(){u.select2("destroy")});t(function(){u.select2(c);o.$observe("disabled",function(n){u.select2("enable",!n)});o.$observe("readonly",function(n){u.select2("readonly",!!n)});o.ngMultiple&&n.$watch(o.ngMultiple,function(n){o.$set("multiple",!!n);u.select2(c)});u.val(h.$viewValue);h.$render();setTimeout(function(){h.$selectRender()},0);c.initSelection||f||h.$setViewValue(l(u.select2("data")))})}}}}]),function(n,t){"use strict";n.module("ng.shims.placeholder",[]).directive("placeholder",function(){if(!n.mock){var i=t.createElement("input");if(i.placeholder!==void 0)return{}}return{restrict:"A",require:"ngModel",priority:1,link:function(t,i,r,u){function l(){s=n.element("<input/>").attr(n.extend(y(e),{type:"text",value:f,placeholder:"",id:"",name:""})).addClass(h).addClass("ng-hide").bind("focus",v);e.parentNode.insertBefore(s[0],e)}function a(){i.addClass("ng-hide");s.removeClass("ng-hide")}function v(){s.addClass("ng-hide");i.removeClass("ng-hide");e.focus()}function y(n){for(var i=n.attributes,r={},t=0;t<i.length;t++)i[t].specified&&!/^jQuery\d+/.test(i[t].name)&&(r[i[t].name]=i[t].value);return r}var c=r.type==="password",f=r.placeholder,h="empty",e=i[0],o,s;f&&(c&&l(),t.$watch(r.ngModel,function(n){o=n||"";o?o!==f&&i.removeClass(h):i.addClass(h)}),i.bind("focus",function(){o===""&&i.val("")}),i.bind("blur",function(){i.val()===""&&i.val(f)}),u.$formatters.unshift(function(n){return n||(c?a():f)}))}}})}(window.angular,window.document);angular.module("ui.calendar",[]).constant("uiCalendarConfig",{calendars:{}}).controller("uiCalendarCtrl",["$scope","$locale",function(n,t){var u=n.eventSources,f=n.calendarWatchEvent?n.calendarWatchEvent:angular.noop,e=function(t){return function(){if(n.$root.$$phase)return t.apply(this,arguments);var i=arguments,r=this;return n.$root.$apply(function(){return t.apply(r,i)})}},o=1,i,r;this.eventFingerprint=function(n){n._id||(n._id=o++);var t=f({event:n})||"",i=moment.isMoment(n.start)?n.start.unix():n.start?moment(n.start).unix():"",r=moment.isMoment(n.end)?n.end.unix():n.end?moment(n.end).unix():"";return[n._id,n.id||"",n.title||"",n.url||"",i,r,n.allDay||"",n.className||"",t].join("")};i=1;r=1;this.sourceFingerprint=function(n){var t=""+(n.__id||(n.__id=i++)),u=angular.isObject(n)&&n.events;return u&&(t=t+"-"+(u.__id||(u.__id=r++))),t};this.allEvents=function(){return Array.prototype.concat.apply([],(u||[]).reduce(function(n,t){if(angular.isArray(t))n.push(t);else if(angular.isObject(t)&&angular.isArray(t.events)){var i=Object.keys(t).filter(function(n){return n!=="_id"&&n!=="events"});t.events.forEach(function(n){angular.extend(n,i)});n.push(t.events)}return n},[]))};this.changeWatcher=function(n,t){var i,f=function(){return((angular.isFunction(n)?n():n)||[]).reduce(function(n,i){var u=t(i);return r[u]=i,n.push(u),n},[])},u=function(n,t){var i=(t||[]).reduce(function(n,t){return n[t]=!0,n},Object.create(null));return(n||[]).filter(function(n){return!i[n]})},r={},e=function(n,f){for(var h,a={},v=u(f,n),o,s,c,l,e=0;e<v.length;e++)if(o=v[e],s=r[o],delete r[o],c=t(s),c===o)i.onRemoved(s);else{a[c]=o;i.onChanged(s)}for(l=u(n,f),e=0;e<l.length;e++)if(h=l[e],!a[h])i.onAdded(r[h])};return i={subscribe:function(n,t){n.$watch(f,function(n,i){var r=!(t&&t(n,i)===!1);r&&e(n,i)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}};this.getFullCalendarConfig=function(n,t){var i={};return angular.extend(i,t),angular.extend(i,n),angular.forEach(i,function(n,t){typeof n=="function"&&(i[t]=e(i[t]))}),i};this.getLocaleConfig=function(n){if(!n.lang&&!n.locale||n.useNgLocale){var i=function(n){return(Object.keys(n)||[]).reduce(function(t,i){return t.push(n[i]),t},[])},r=t.DATETIME_FORMATS;return{monthNames:i(r.MONTH),monthNamesShort:i(r.SHORTMONTH),dayNames:i(r.DAY),dayNamesShort:i(r.SHORTDAY)}}return{}}}]).directive("uiCalendar",["uiCalendarConfig",function(n){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarCtrl",link:function(t,i,r,u){function l(){var h=r.uiCalendar?t.$parent.$eval(r.uiCalendar):{},o=u.getFullCalendarConfig(h,n),s=u.getLocaleConfig(o),f,i;angular.extend(s,o);e={eventSources:c};angular.extend(e,s);e.calendars=null;f={};for(i in e)i!=="eventSources"&&(f[i]=e[i]);return JSON.stringify(f)}var c=t.eventSources,o=!1,f,s=u.changeWatcher(c,u.sourceFingerprint),h=u.changeWatcher(u.allEvents,u.eventFingerprint),e=null;t.destroyCalendar=function(){f&&f.fullCalendar&&f.fullCalendar("destroy");f=r.calendar?n.calendars[r.calendar]=angular.element(i).html(""):angular.element(i).html("")};t.initCalendar=function(){f||(f=$(i).html(""));f.fullCalendar(e);r.calendar&&(n.calendars[r.calendar]=f)};t.$on("$destroy",function(){t.destroyCalendar()});s.onAdded=function(t){f&&f.fullCalendar&&(f.fullCalendar(e),r.calendar&&(n.calendars[r.calendar]=f),f.fullCalendar("addEventSource",t),o=!0)};s.onRemoved=function(n){f&&f.fullCalendar&&(f.fullCalendar("removeEventSource",n),o=!0)};s.onChanged=function(){f&&f.fullCalendar&&(f.fullCalendar("refetchEvents"),o=!0)};h.onAdded=function(n){f&&f.fullCalendar&&f.fullCalendar("renderEvent",n,!!n.stick)};h.onRemoved=function(n){f&&f.fullCalendar&&f.fullCalendar("removeEvents",n._id)};h.onChanged=function(n){var r,t,i;if(f&&f.fullCalendar)for(r=f.fullCalendar("clientEvents",n._id),t=0;t<r.length;t++)i=r[t],i=angular.extend(i,n),f.fullCalendar("updateEvent",i)};s.subscribe(t);h.subscribe(t,function(){if(o===!0)return o=!1,!1});t.$watch(l,function(n,i){n!==i?(t.destroyCalendar(),t.initCalendar()):n&&angular.isUndefined(f)&&t.initCalendar()})}}}]),function(){"use strict";angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeHolderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){"use strict";angular.module("ui.tree").factory("$uiTreeHelper",["$document","$window",function(n,t){return{nodesData:{},setNodeAttribute:function(n,t,i){var r=this.nodesData[n.$modelValue.$$hashKey];r||(r={},this.nodesData[n.$modelValue.$$hashKey]=r);r[t]=i},getNodeAttribute:function(n,t){var i=this.nodesData[n.$modelValue.$$hashKey];return i?i[t]:null},nodrag:function(n){return typeof n.attr("data-nodrag")!="undefined"},eventObj:function(n){var t=n;return n.targetTouches!==undefined?t=n.targetTouches.item(0):n.originalEvent!==undefined&&n.originalEvent.targetTouches!==undefined&&(t=n.originalEvent.targetTouches.item(0)),t},dragInfo:function(n){return{source:n,sourceInfo:{nodeScope:n,index:n.index(),nodesScope:n.$parentNodesScope},index:n.index(),siblings:n.siblings().slice(0),parent:n.$parentNodesScope,moveTo:function(n,t,i){this.parent=n;this.siblings=t.slice(0);var r=this.siblings.indexOf(this.source);r>-1&&(this.siblings.splice(r,1),this.source.index()<i&&i--);this.siblings.splice(i,0,this.source);this.index=i},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},eventArgs:function(n,t){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:n,pos:t}},apply:function(){var n=this.source.$modelValue;this.source.remove();this.parent.insertNode(this.index,n)}}},height:function(n){return n.prop("scrollHeight")},width:function(n){return n.prop("scrollWidth")},offset:function(i){var r=i[0].getBoundingClientRect();return{width:i.prop("offsetWidth"),height:i.prop("offsetHeight"),top:r.top+(t.pageYOffset||n[0].body.scrollTop||n[0].documentElement.scrollTop),left:r.left+(t.pageXOffset||n[0].body.scrollLeft||n[0].documentElement.scrollLeft)}},positionStarted:function(n,t){var i={};return i.offsetX=n.pageX-this.offset(t).left,i.offsetY=n.pageY-this.offset(t).top,i.startX=i.lastX=n.pageX,i.startY=i.lastY=n.pageY,i.nowX=i.nowY=i.distX=i.distY=i.dirAx=0,i.dirX=i.dirY=i.lastDirX=i.lastDirY=i.distAxX=i.distAxY=0,i},positionMoved:function(n,t,i){t.lastX=t.nowX;t.lastY=t.nowY;t.nowX=n.pageX;t.nowY=n.pageY;t.distX=t.nowX-t.lastX;t.distY=t.nowY-t.lastY;t.lastDirX=t.dirX;t.lastDirY=t.dirY;t.dirX=t.distX===0?0:t.distX>0?1:-1;t.dirY=t.distY===0?0:t.distY>0?1:-1;var r=Math.abs(t.distX)>Math.abs(t.distY)?1:0;if(i){t.dirAx=r;t.moving=!0;return}t.dirAx!==r?(t.distAxX=0,t.distAxY=0):(t.distAxX+=Math.abs(t.distX),t.dirX!==0&&t.dirX!==t.lastDirX&&(t.distAxX=0),t.distAxY+=Math.abs(t.distY),t.dirY!==0&&t.dirY!==t.lastDirY&&(t.distAxY=0));t.dirAx=r}}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeController",["$scope","$element","$attrs","treeConfig",function(n,t){this.scope=n;n.$element=t;n.$nodesScope=null;n.$type="uiTree";n.$emptyElm=null;n.$callbacks=null;n.dragEnabled=!0;n.emptyPlaceHolderEnabled=!0;n.maxDepth=0;n.dragDelay=0;n.isEmpty=function(){return n.$nodesScope&&n.$nodesScope.$modelValue&&n.$nodesScope.$modelValue.length===0};n.place=function(t){n.$nodesScope.$element.append(t);n.$emptyElm.remove()};n.resetEmptyElement=function(){n.$nodesScope.$modelValue.length===0&&n.emptyPlaceHolderEnabled?t.append(n.$emptyElm):n.$emptyElm.remove()};var i=function(n,t){for(var f,u=n.childNodes(),r=0;r<u.length;r++)t?u[r].collapse():u[r].expand(),f=u[r].$childNodesScope,f&&i(f,t)};n.collapseAll=function(){i(n.$nodesScope,!0)};n.expandAll=function(){i(n.$nodesScope,!1)}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodesController",["$scope","$element","treeConfig",function(n,t){this.scope=n;n.$element=t;n.$modelValue=null;n.$nodeScope=null;n.$treeScope=null;n.$type="uiTreeNodes";n.$nodesMap={};n.nodrop=!1;n.maxDepth=0;n.initSubNode=function(t){n.$nodesMap[t.$modelValue.$$hashKey]=t};n.destroySubNode=function(t){n.$nodesMap[t.$modelValue.$$hashKey]=null};n.accept=function(t,i){return n.$treeScope.$callbacks.accept(t,n,i)};n.beforeDrag=function(t){return n.$treeScope.$callbacks.beforeDrag(t)};n.isParent=function(t){return t.$parentNodesScope==n};n.hasChild=function(){return n.$modelValue.length>0};n.safeApply=function(n){var t=this.$root.$$phase;t=="$apply"||t=="$digest"?n&&typeof n=="function"&&n():this.$apply(n)};n.removeNode=function(t){var i=n.$modelValue.indexOf(t.$modelValue);return i>-1?(n.safeApply(function(){n.$modelValue.splice(i,1)[0]}),t):null};n.insertNode=function(t,i){n.safeApply(function(){n.$modelValue.splice(t,0,i)})};n.childNodes=function(){var i=[],t;if(n.$modelValue)for(t=0;t<n.$modelValue.length;t++)i.push(n.$nodesMap[n.$modelValue[t].$$hashKey]);return i};n.depth=function(){return n.$nodeScope?n.$nodeScope.depth():0};n.outOfDepth=function(t){var i=n.maxDepth||n.$treeScope.maxDepth;return i>0?n.depth()+t.maxSubDepth()+1>i:!1}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeNodeController",["$scope","$element","$attrs","treeConfig",function(n,t){this.scope=n;n.$element=t;n.$modelValue=null;n.$parentNodeScope=null;n.$childNodesScope=null;n.$parentNodesScope=null;n.$treeScope=null;n.$handleScope=null;n.$type="uiTreeNode";n.$$apply=!1;n.collapsed=!1;n.init=function(i){var r=i[0];n.$treeScope=i[1]?i[1].scope:null;n.$parentNodeScope=r.scope.$nodeScope;n.$modelValue=r.scope.$modelValue[n.$index];n.$parentNodesScope=r.scope;r.scope.initSubNode(n);t.on("$destroy",function(){r.scope.destroySubNode(n)})};n.index=function(){return n.$parentNodesScope.$modelValue.indexOf(n.$modelValue)};n.dragEnabled=function(){return!(n.$treeScope&&!n.$treeScope.dragEnabled)};n.isSibling=function(t){return n.$parentNodesScope==t.$parentNodesScope};n.isChild=function(t){var i=n.childNodes();return i&&i.indexOf(t)>-1};n.prev=function(){var t=n.index();return t>0?n.siblings()[t-1]:null};n.siblings=function(){return n.$parentNodesScope.childNodes()};n.childNodesCount=function(){return n.childNodes()?n.childNodes().length:0};n.hasChild=function(){return n.childNodesCount()>0};n.childNodes=function(){return n.$childNodesScope&&n.$childNodesScope.$modelValue?n.$childNodesScope.childNodes():null};n.accept=function(t,i){return n.$childNodesScope&&n.$childNodesScope.$modelValue&&n.$childNodesScope.accept(t,i)};n.removeNode=function(){var t=n.remove();return n.$callbacks.removed(t),t};n.remove=function(){return n.$parentNodesScope.removeNode(n)};n.toggle=function(){n.collapsed=!n.collapsed};n.collapse=function(){n.collapsed=!0};n.expand=function(){n.collapsed=!1};n.depth=function(){var t=n.$parentNodeScope;return t?t.depth()+1:1};var i=0,r=function(n){for(var u,f=0,e=n.childNodes(),t=0;t<e.length;t++)u=e[t].$childNodesScope,u&&(f=1,r(u));i+=f};n.maxSubDepth=function(){return i=0,n.$childNodesScope&&r(n.$childNodesScope),i}}])}(),function(){"use strict";angular.module("ui.tree").controller("TreeHandleController",["$scope","$element","$attrs","treeConfig",function(n,t){this.scope=n;n.$element=t;n.$nodeScope=null;n.$type="uiTreeHandle"}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(n,t){return{restrict:"A",scope:!0,controller:"TreeController",link:function(i,r,u){var f={accept:null,beforeDrag:null},e={};angular.extend(e,n);e.treeClass&&r.addClass(e.treeClass);i.$emptyElm=angular.element(t.document.createElement("div"));e.emptyTreeClass&&i.$emptyElm.addClass(e.emptyTreeClass);i.$watch("$nodesScope.$modelValue.length",function(){i.$nodesScope.$modelValue&&i.resetEmptyElement()},!0);i.$watch(u.dragEnabled,function(n){typeof n=="boolean"&&(i.dragEnabled=n)});i.$watch(u.emptyPlaceHolderEnabled,function(n){typeof n=="boolean"&&(i.emptyPlaceHolderEnabled=n)});i.$watch(u.maxDepth,function(n){typeof n=="number"&&(i.maxDepth=n)});i.$watch(u.dragDelay,function(n){typeof n=="number"&&(i.dragDelay=n)});f.accept=function(n,t){return t.nodrop||t.outOfDepth(n)?!1:!0};f.beforeDrag=function(){return!0};f.removed=function(){};f.dropped=function(){};f.dragStart=function(){};f.dragMove=function(){};f.dragStop=function(){};f.beforeDrop=function(){};i.$watch(u.uiTree,function(n){angular.forEach(n,function(n,t){f[t]&&typeof n=="function"&&(f[t]=n)});i.$callbacks=f},!0)}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(n){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(t,i,r,u){var e={};angular.extend(e,n);e.nodesClass&&i.addClass(e.nodesClass);var f=u[0],o=u[1],s=u[2];o?(o.scope.$childNodesScope=t,t.$nodeScope=o.scope):s.scope.$nodesScope=t;t.$treeScope=s.scope;f&&(f.$render=function(){f.$modelValue&&angular.isArray(f.$modelValue)||(t.$modelValue=[]);t.$modelValue=f.$modelValue});t.$watch(r.maxDepth,function(n){typeof n=="number"&&(t.maxDepth=n)});r.$observe("nodrop",function(n){t.nodrop=typeof n!="undefined"});r.$observe("horizontal",function(n){t.horizontal=typeof n!="undefined"})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeNode",["treeConfig","$uiTreeHelper","$window","$document","$timeout",function(n,t,i,r,u){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(f,e,o,s){var v={};angular.extend(v,n);v.nodeClass&&e.addClass(v.nodeClass);f.init(s);f.collapsed=!!t.getNodeAttribute(f,"collapsed");f.$watch(o.collapsed,function(n){typeof n=="boolean"&&(f.collapsed=n)});f.$watch("collapsed",function(n){t.setNodeAttribute(f,"collapsed",n);o.$set("collapsed",n)});var ht="ontouchstart"in window,k,c,l,a,d,h,b=null,y,it=!0,rt=!1,et=null,g=document.body,p=document.documentElement,nt,ut,ct=function(n){var u,o,s,it,b,ft,rt;if((ht||n.button!=2&&n.which!=3)&&!n.uiTreeDragging&&(!n.originalEvent||!n.originalEvent.uiTreeDragging)&&(u=angular.element(n.target),o=u.scope(),o&&o.$type)&&(o.$type=="uiTreeNode"||o.$type=="uiTreeHandle")&&(o.$type!="uiTreeNode"||!o.$handleScope)&&(s=u.prop("tagName").toLowerCase(),s!="input"&&s!="textarea"&&s!="button"&&s!="select")){while(u&&u[0]&&u[0]!=e){if(t.nodrag(u))return;u=u.parent()}f.beforeDrag(f)&&(n.uiTreeDragging=!0,n.originalEvent&&(n.originalEvent.uiTreeDragging=!0),n.preventDefault(),it=t.eventObj(n),k=!0,c=t.dragInfo(f),b=f.$element.prop("tagName"),b.toLowerCase()==="tr"?(a=angular.element(i.document.createElement(b)),ft=angular.element(i.document.createElement("td")).addClass(v.placeHolderClass),a.append(ft)):a=angular.element(i.document.createElement(b)).addClass(v.placeHolderClass),d=angular.element(i.document.createElement(b)),v.hiddenClass&&d.addClass(v.hiddenClass),l=t.positionStarted(it,f.$element),a.css("height",t.height(f.$element)+"px"),a.css("width",t.width(f.$element)+"px"),h=angular.element(i.document.createElement(f.$parentNodesScope.$element.prop("tagName"))).addClass(f.$parentNodesScope.$element.attr("class")).addClass(v.dragClass),h.css("width",t.width(f.$element)+"px"),h.css("z-index",9999),rt=(f.$element[0].querySelector(".angular-ui-tree-handle")||f.$element[0]).currentStyle,rt&&(document.body.setAttribute("ui-tree-cursor",r.find("body").css("cursor")||""),r.find("body").css({cursor:rt.cursor+"!important"})),f.$element.after(a),f.$element.after(d),h.append(f.$element),r.find("body").append(h),h.css({left:it.pageX-l.offsetX+"px",top:it.pageY-l.offsetY+"px"}),y={placeholder:a,dragging:h},angular.element(r).bind("touchend",w),angular.element(r).bind("touchcancel",w),angular.element(r).bind("touchmove",tt),angular.element(r).bind("mouseup",w),angular.element(r).bind("mousemove",tt),angular.element(r).bind("mouseleave",ot),nt=Math.max(g.scrollHeight,g.offsetHeight,p.clientHeight,p.scrollHeight,p.offsetHeight),ut=Math.max(g.scrollWidth,g.offsetWidth,p.clientWidth,p.scrollWidth,p.offsetWidth))}},lt=function(n){var u,e,p,w,g,tt,ot,s,o,ft,r,d,et;if(!rt){it||(rt=!0,f.$apply(function(){f.$callbacks.dragStart(c.eventArgs(y,l))}));return}if(u=t.eventObj(n),h){if(n.preventDefault(),i.getSelection?i.getSelection().removeAllRanges():i.document.selection&&i.document.selection.empty(),p=u.pageX-l.offsetX,w=u.pageY-l.offsetY,p<0&&(p=0),w<0&&(w=0),w+10>nt&&(w=nt-10),p+10>ut&&(p=ut-10),h.css({left:p+"px",top:w+"px"}),g=window.pageYOffset||i.document.documentElement.scrollTop,tt=g+(window.innerHeight||i.document.clientHeight||i.document.clientHeight),tt<u.pageY&&tt<=nt&&window.scrollBy(0,10),g>u.pageY&&window.scrollBy(0,-10),t.positionMoved(n,l,k),k){k=!1;return}l.dirAx&&l.distAxX>=v.levelThreshold&&(l.distAxX=0,l.distX>0&&(e=c.prev(),e&&!e.collapsed&&e.accept(f,e.childNodesCount())&&(e.$childNodesScope.$element.append(a),c.moveTo(e.$childNodesScope,e.childNodes(),e.childNodesCount()))),l.distX<0&&(ot=c.next(),ot||(s=c.parentNode(),s&&s.$parentNodesScope.accept(f,s.index()+1)&&(s.$element.after(a),c.moveTo(s.$parentNodesScope,s.siblings(),s.index()+1)))));var lt=t.offset(h).left-t.offset(a).left>=v.threshold,st=u.pageX-i.document.body.scrollLeft,ht=u.pageY-(window.pageYOffset||i.document.documentElement.scrollTop),ct;if(angular.isFunction(h.hide)?h.hide():(ct=h[0].style.display,h[0].style.display="none"),i.document.elementFromPoint(st,ht),o=angular.element(i.document.elementFromPoint(st,ht)),angular.isFunction(h.show)?h.show():h[0].style.display=ct,!l.dirAx){if(r=o.scope(),d=!1,!r)return;if(r.$type=="uiTree"&&r.dragEnabled&&(d=r.isEmpty()),r.$type=="uiTreeHandle"&&(r=r.$nodeScope),r.$type!="uiTreeNode"&&!d)return;b&&a.parent()[0]!=b.$element[0]&&(b.resetEmptyElement(),b=null);d?(b=r,r.$nodesScope.accept(f,0)&&(r.place(a),c.moveTo(r.$nodesScope,r.$nodesScope.childNodes(),0))):r.dragEnabled()&&(o=r.$element,et=t.offset(o),ft=r.horizontal?u.pageX<et.left+t.width(o)/2:u.pageY<et.top+t.height(o)/2,r.$parentNodesScope.accept(f,r.index())?ft?(o[0].parentNode.insertBefore(a[0],o[0]),c.moveTo(r.$parentNodesScope,r.siblings(),r.index())):(o.after(a),c.moveTo(r.$parentNodesScope,r.siblings(),r.index()+1)):!ft&&r.accept(f,r.childNodesCount())&&(r.$childNodesScope.$element.append(a),c.moveTo(r.$childNodesScope,r.childNodes(),r.childNodesCount())))}f.$apply(function(){f.$callbacks.dragMove(c.eventArgs(y,l))})}},ft=function(n){n.preventDefault();h&&(f.$treeScope.$apply(function(){f.$callbacks.beforeDrop(c.eventArgs(y,l))}),d.replaceWith(f.$element),a.remove(),h.remove(),h=null,f.$$apply?(c.apply(),f.$treeScope.$apply(function(){f.$callbacks.dropped(c.eventArgs(y,l))})):st(),f.$treeScope.$apply(function(){f.$callbacks.dragStop(c.eventArgs(y,l))}),f.$$apply=!1,c=null);var t=document.body.getAttribute("ui-tree-cursor");t!==null&&(r.find("body").css({cursor:t}),document.body.removeAttribute("ui-tree-cursor"));angular.element(r).unbind("touchend",w);angular.element(r).unbind("touchcancel",w);angular.element(r).unbind("touchmove",tt);angular.element(r).unbind("mouseup",w);angular.element(r).unbind("mousemove",tt);angular.element(i.document.body).unbind("mouseleave",ot)},at=function(n){f.dragEnabled()&&ct(n)},tt=function(n){lt(n)},w=function(n){f.$$apply=!0;ft(n)},ot=function(n){ft(n)},st=function(){e.bind("touchstart mousedown",function(n){it=!0;rt=!1;at(n);et=u(function(){it=!1},f.dragDelay)});e.bind("touchend touchcancel mouseup",function(){u.cancel(et)})};st();angular.element(i.document.body).bind("keydown",function(n){n.keyCode==27&&(f.$$apply=!1,ft(n))})}}}])}(),function(){"use strict";angular.module("ui.tree").directive("uiTreeHandle",["treeConfig","$window",function(n){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(t,i,r,u){var f={};angular.extend(f,n);f.handleClass&&i.addClass(f.handleClass);t!=u.scope&&(t.$nodeScope=u.scope,u.scope.$handleScope=t)}}}])}();!function(n){"use strict";"function"==typeof define&&define.amd?define(["angular","chart"],n):"object"==typeof exports?module.exports=n(require("angular"),require("chart.js")):n(angular,Chart)}(function(n,t){"use strict";function r(){var i={},r={Chart:t,getOptions:function(t){var r=t&&i[t]||{};return n.extend({},i,r)}};this.setOptions=function(t,r){return r?(i[t]=n.extend(i[t]||{},r),void 0):(r=t,i=n.extend(i,r),void 0)};this.$get=function(){return r}}function u(r,u){function l(n,t){return n&&t&&n.length&&t.length?Array.isArray(n[0])?n.length===t.length&&n.every(function(n,i){return n.length===t[i].length}):t.reduce(a,0)>0?n.length===t.length:!1:!1}function a(n,t){return n+t}function v(n,t,i){return function(r){var u=t.getPointsAtEvent||t.getBarsAtEvent||t.getSegmentsAtEvent,f;u&&(f=u.call(t,r),n[i](f,r),n.$apply())}}function y(i,u){for(var f=n.copy(u.colours||r.getOptions(i).colours||t.defaults.global.colours);f.length<u.data.length;)f.push(u.getColour());return f.map(p)}function p(n){return"object"==typeof n&&null!==n?n:"string"==typeof n&&"#"===n[0]?s(w(n.substr(1))):o()}function o(){var n=[e(0,255),e(0,255),e(0,255)];return s(n)}function s(n){return{fillColor:f(n,.2),strokeColor:f(n,1),pointColor:f(n,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:f(n,.8)}}function e(n,t){return Math.floor(Math.random()*(t-n+1))+n}function f(n,t){return i?"rgb("+n.join(",")+")":"rgba("+n.concat(t).join(",")+")"}function w(n){var t=parseInt(n,16),i=t>>16&255,r=t>>8&255,u=255&t;return[i,r,u]}function b(t,i,r,u){return{labels:t,datasets:i.map(function(t,i){return n.extend({},u[i],{label:r[i],data:t})})}}function k(t,i,r){return t.map(function(t,u){return n.extend({},r[u],{label:t,value:i[u],color:r[u].strokeColor,highlight:r[u].pointHighlightStroke})})}function h(n,t){var i=n.parent(),r=i.find("chart-legend"),u="<chart-legend>"+t.generateLegend()+"<\/chart-legend>";r.length?r.replaceWith(u):i.append(u)}function d(n,t,i,r){Array.isArray(i.data[0])?n.datasets.forEach(function(n,i){(n.points||n.bars).forEach(function(n,r){n.value=t[i][r]})}):n.segments.forEach(function(n,i){n.value=t[i]});n.update();i.$emit("update",n);i.legend&&"false"!==i.legend&&h(r,n)}function c(n){return!n||Array.isArray(n)&&!n.length||"object"==typeof n&&!Object.keys(n).length}function g(i,u){var f=n.extend({},t.defaults.global,r.getOptions(i),u.options);return f.responsive}return function(t){return{restrict:"CA",scope:{data:"=?",labels:"=?",options:"=?",series:"=?",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=?",hover:"=?",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColours:"=?",chartLegend:"@",chartClick:"=?",chartHover:"=?"},link:function(f,e){function a(n,t){f.$watch(n,function(n){"undefined"!=typeof n&&(f[t]=n)})}function p(i,r){if(!c(i)&&!n.equals(i,r)){var u=t||f.chartType;u&&(s&&s.destroy(),w(u))}}function w(t){if(g(t,f)&&0===e[0].clientHeight&&0===nt.clientHeight)return u(function(){w(t)},50);if(f.data&&f.data.length){f.getColour="function"==typeof f.getColour?f.getColour:o;f.colours=y(t,f);var i=e[0],c=i.getContext("2d"),l=Array.isArray(f.data[0])?b(f.labels,f.data,f.series||[],f.colours):k(f.labels,f.data,f.colours),a=n.extend({},r.getOptions(t),f.options);s=new r.Chart(c)[t](l,a);f.$emit("create",s);["hover","click"].forEach(function(n){f[n]&&(i["click"===n?"onclick":"onmousemove"]=v(f,s,n))});f.legend&&"false"!==f.legend&&h(e,s)}}function tt(n){if("undefined"!=typeof console&&"test"!==r.getOptions().env){var t="function"==typeof console.warn?console.warn:console.log;f[n]&&t.call(console,'"%s" is deprecated and will be removed in a future version. Please use "chart-%s" instead.',n,n)}}var s,nt=document.createElement("div");nt.className="chart-container";e.replaceWith(nt);nt.appendChild(e[0]);i&&window.G_vmlCanvasManager.initElement(e[0]);["data","labels","options","series","colours","legend","click","hover"].forEach(tt);a("chartData","data");a("chartLabels","labels");a("chartOptions","options");a("chartSeries","series");a("chartColours","colours");a("chartLegend","legend");a("chartClick","click");a("chartHover","hover");f.$watch("data",function(n,i){if(n&&n.length&&(!Array.isArray(n[0])||n[0].length)){var r=t||f.chartType;if(r){if(s){if(l(n,i))return d(s,n,f,e);s.destroy()}w(r)}}},!0);f.$watch("series",p,!0);f.$watch("labels",p,!0);f.$watch("options",p,!0);f.$watch("colours",p,!0);f.$watch("chartType",function(t,i){c(t)||n.equals(t,i)||(s&&s.destroy(),w(t))});f.$on("$destroy",function(){s&&s.destroy()})}}}}t.defaults.global.responsive=!0;t.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>";t.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var i="object"==typeof G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return i&&(t.defaults.global.animation=!1),n.module("chart.js",[]).provider("ChartJs",r).factory("ChartJsFactory",["ChartJs","$timeout",u]).directive("chartBase",["ChartJsFactory",function(n){return new n}]).directive("chartLine",["ChartJsFactory",function(n){return new n("Line")}]).directive("chartBar",["ChartJsFactory",function(n){return new n("Bar")}]).directive("chartRadar",["ChartJsFactory",function(n){return new n("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(n){return new n("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(n){return new n("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(n){return new n("PolarArea")}])});!function(){"use strict";var n=angular.module("ngImgCrop",[]);n.factory("cropAreaCircle",["cropArea",function(n){var t=function(){n.apply(this,arguments);this._boxResizeBaseSize=20;this._boxResizeNormalRatio=.9;this._boxResizeHoverRatio=1.2;this._iconMoveNormalRatio=.9;this._iconMoveHoverRatio=1.2;this._boxResizeNormalSize=this._boxResizeBaseSize*this._boxResizeNormalRatio;this._boxResizeHoverSize=this._boxResizeBaseSize*this._boxResizeHoverRatio;this._posDragStartX=0;this._posDragStartY=0;this._posResizeStartX=0;this._posResizeStartY=0;this._posResizeStartSize=0;this._boxResizeIsHover=!1;this._areaIsHover=!1;this._boxResizeIsDragging=!1;this._areaIsDragging=!1};return t.prototype=new n,t.prototype._calcCirclePerimeterCoords=function(n){var t=this._size/2,i=n*(Math.PI/180),r=this._x+t*Math.cos(i),u=this._y+t*Math.sin(i);return[r,u]},t.prototype._calcResizeIconCenterCoords=function(){return this._calcCirclePerimeterCoords(-45)},t.prototype._isCoordWithinArea=function(n){return Math.sqrt((n[0]-this._x)*(n[0]-this._x)+(n[1]-this._y)*(n[1]-this._y))<this._size/2},t.prototype._isCoordWithinBoxResize=function(n){var t=this._calcResizeIconCenterCoords(),i=this._boxResizeHoverSize/2;return n[0]>t[0]-i&&n[0]<t[0]+i&&n[1]>t[1]-i&&n[1]<t[1]+i},t.prototype._drawArea=function(n,t,i){n.arc(t[0],t[1],i/2,0,2*Math.PI)},t.prototype.draw=function(){n.prototype.draw.apply(this,arguments);this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);this._cropCanvas.drawIconResizeBoxNESW(this._calcResizeIconCenterCoords(),this._boxResizeBaseSize,this._boxResizeIsHover?this._boxResizeHoverRatio:this._boxResizeNormalRatio)},t.prototype.processMouseMove=function(n,t){var i="default",r=!1,e,u,f;return(this._boxResizeIsHover=!1,this._areaIsHover=!1,this._areaIsDragging)?(this._x=n-this._posDragStartX,this._y=t-this._posDragStartY,this._areaIsHover=!0,i="move",r=!0,this._events.trigger("area-move")):this._boxResizeIsDragging?(i="nesw-resize",u=n-this._posResizeStartX,f=this._posResizeStartY-t,e=u>f?this._posResizeStartSize+2*f:this._posResizeStartSize+2*u,this._size=Math.max(this._minSize,e),this._boxResizeIsHover=!0,r=!0,this._events.trigger("area-resize")):this._isCoordWithinBoxResize([n,t])?(i="nesw-resize",this._areaIsHover=!1,this._boxResizeIsHover=!0,r=!0):this._isCoordWithinArea([n,t])&&(i="move",this._areaIsHover=!0,r=!0),this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:i}),r},t.prototype.processMouseDown=function(n,t){this._isCoordWithinBoxResize([n,t])?(this._areaIsDragging=!1,this._areaIsHover=!1,this._boxResizeIsDragging=!0,this._boxResizeIsHover=!0,this._posResizeStartX=n,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([n,t])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._boxResizeIsDragging=!1,this._boxResizeIsHover=!1,this._posDragStartX=n-this._x,this._posDragStartY=t-this._y,this._events.trigger("area-move-start"))},t.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end"));this._boxResizeIsDragging&&(this._boxResizeIsDragging=!1,this._events.trigger("area-resize-end"));this._areaIsHover=!1;this._boxResizeIsHover=!1;this._posDragStartX=0;this._posDragStartY=0},t}]);n.factory("cropAreaSquare",["cropArea",function(n){var t=function(){n.apply(this,arguments);this._resizeCtrlBaseRadius=10;this._resizeCtrlNormalRatio=.75;this._resizeCtrlHoverRatio=1;this._iconMoveNormalRatio=.9;this._iconMoveHoverRatio=1.2;this._resizeCtrlNormalRadius=this._resizeCtrlBaseRadius*this._resizeCtrlNormalRatio;this._resizeCtrlHoverRadius=this._resizeCtrlBaseRadius*this._resizeCtrlHoverRatio;this._posDragStartX=0;this._posDragStartY=0;this._posResizeStartX=0;this._posResizeStartY=0;this._posResizeStartSize=0;this._resizeCtrlIsHover=-1;this._areaIsHover=!1;this._resizeCtrlIsDragging=-1;this._areaIsDragging=!1};return t.prototype=new n,t.prototype._calcSquareCorners=function(){var n=this._size/2;return[[this._x-n,this._y-n],[this._x+n,this._y-n],[this._x-n,this._y+n],[this._x+n,this._y+n]]},t.prototype._calcSquareDimensions=function(){var n=this._size/2;return{left:this._x-n,top:this._y-n,right:this._x+n,bottom:this._y+n}},t.prototype._isCoordWithinArea=function(n){var t=this._calcSquareDimensions();return n[0]>=t.left&&n[0]<=t.right&&n[1]>=t.top&&n[1]<=t.bottom},t.prototype._isCoordWithinResizeCtrl=function(n){for(var t,r=this._calcSquareCorners(),u=-1,i=0,f=r.length;f>i;i++)if(t=r[i],n[0]>t[0]-this._resizeCtrlHoverRadius&&n[0]<t[0]+this._resizeCtrlHoverRadius&&n[1]>t[1]-this._resizeCtrlHoverRadius&&n[1]<t[1]+this._resizeCtrlHoverRadius){u=i;break}return u},t.prototype._drawArea=function(n,t,i){var r=i/2;n.rect(t[0]-r,t[1]-r,i,i)},t.prototype.draw=function(){var r;n.prototype.draw.apply(this,arguments);this._cropCanvas.drawIconMove([this._x,this._y],this._areaIsHover?this._iconMoveHoverRatio:this._iconMoveNormalRatio);for(var i=this._calcSquareCorners(),t=0,u=i.length;u>t;t++)r=i[t],this._cropCanvas.drawIconResizeCircle(r,this._resizeCtrlBaseRadius,this._resizeCtrlIsHover===t?this._resizeCtrlHoverRatio:this._resizeCtrlNormalRatio)},t.prototype.processMouseMove=function(n,t){var i="default",f=!1,r,u,c,o,s,l,h,e;if(this._resizeCtrlIsHover=-1,this._areaIsHover=!1,this._areaIsDragging)this._x=n-this._posDragStartX,this._y=t-this._posDragStartY,this._areaIsHover=!0,i="move",f=!0,this._events.trigger("area-move");else if(this._resizeCtrlIsDragging>-1){switch(this._resizeCtrlIsDragging){case 0:r=-1;u=-1;i="nwse-resize";break;case 1:r=1;u=-1;i="nesw-resize";break;case 2:r=-1;u=1;i="nesw-resize";break;case 3:r=1;u=1;i="nwse-resize"}o=(n-this._posResizeStartX)*r;s=(t-this._posResizeStartY)*u;c=o>s?this._posResizeStartSize+s:this._posResizeStartSize+o;l=this._size;this._size=Math.max(this._minSize,c);h=(this._size-l)/2;this._x+=h*r;this._y+=h*u;this._resizeCtrlIsHover=this._resizeCtrlIsDragging;f=!0;this._events.trigger("area-resize")}else if(e=this._isCoordWithinResizeCtrl([n,t]),e>-1){switch(e){case 0:i="nwse-resize";break;case 1:i="nesw-resize";break;case 2:i="nesw-resize";break;case 3:i="nwse-resize"}this._areaIsHover=!1;this._resizeCtrlIsHover=e;f=!0}else this._isCoordWithinArea([n,t])&&(i="move",this._areaIsHover=!0,f=!0);return this._dontDragOutside(),angular.element(this._ctx.canvas).css({cursor:i}),f},t.prototype.processMouseDown=function(n,t){var i=this._isCoordWithinResizeCtrl([n,t]);i>-1?(this._areaIsDragging=!1,this._areaIsHover=!1,this._resizeCtrlIsDragging=i,this._resizeCtrlIsHover=i,this._posResizeStartX=n,this._posResizeStartY=t,this._posResizeStartSize=this._size,this._events.trigger("area-resize-start")):this._isCoordWithinArea([n,t])&&(this._areaIsDragging=!0,this._areaIsHover=!0,this._resizeCtrlIsDragging=-1,this._resizeCtrlIsHover=-1,this._posDragStartX=n-this._x,this._posDragStartY=t-this._y,this._events.trigger("area-move-start"))},t.prototype.processMouseUp=function(){this._areaIsDragging&&(this._areaIsDragging=!1,this._events.trigger("area-move-end"));this._resizeCtrlIsDragging>-1&&(this._resizeCtrlIsDragging=-1,this._events.trigger("area-resize-end"));this._areaIsHover=!1;this._resizeCtrlIsHover=-1;this._posDragStartX=0;this._posDragStartY=0},t}]);n.factory("cropArea",["cropCanvas",function(n){var t=function(t,i){this._ctx=t;this._events=i;this._minSize=80;this._cropCanvas=new n(t);this._image=new Image;this._x=0;this._y=0;this._size=200};return t.prototype.getImage=function(){return this._image},t.prototype.setImage=function(n){this._image=n},t.prototype.getX=function(){return this._x},t.prototype.setX=function(n){this._x=n;this._dontDragOutside()},t.prototype.getY=function(){return this._y},t.prototype.setY=function(n){this._y=n;this._dontDragOutside()},t.prototype.getSize=function(){return this._size},t.prototype.setSize=function(n){this._size=Math.max(this._minSize,n);this._dontDragOutside()},t.prototype.getMinSize=function(){return this._minSize},t.prototype.setMinSize=function(n){this._minSize=n;this._size=Math.max(this._minSize,this._size);this._dontDragOutside()},t.prototype._dontDragOutside=function(){var n=this._ctx.canvas.height,t=this._ctx.canvas.width;this._size>t&&(this._size=t);this._size>n&&(this._size=n);this._x<this._size/2&&(this._x=this._size/2);this._x>t-this._size/2&&(this._x=t-this._size/2);this._y<this._size/2&&(this._y=this._size/2);this._y>n-this._size/2&&(this._y=n-this._size/2)},t.prototype._drawArea=function(){},t.prototype.draw=function(){this._cropCanvas.drawCropArea(this._image,[this._x,this._y],this._size,this._drawArea)},t.prototype.processMouseMove=function(){},t.prototype.processMouseDown=function(){},t.prototype.processMouseUp=function(){},t}]);n.factory("cropCanvas",[function(){var t=[[-.5,-2],[-3,-4.5],[-.5,-7],[-7,-7],[-7,-.5],[-4.5,-3],[-2,-.5]],i=[[.5,-2],[3,-4.5],[.5,-7],[7,-7],[7,-.5],[4.5,-3],[2,-.5]],r=[[-.5,2],[-3,4.5],[-.5,7],[-7,7],[-7,.5],[-4.5,3],[-2,.5]],u=[[.5,2],[3,4.5],[.5,7],[7,7],[7,.5],[4.5,3],[2,.5]],f=[[-1.5,-2.5],[-1.5,-6],[-5,-6],[0,-11],[5,-6],[1.5,-6],[1.5,-2.5]],e=[[-2.5,-1.5],[-6,-1.5],[-6,-5],[-11,0],[-6,5],[-6,1.5],[-2.5,1.5]],o=[[-1.5,2.5],[-1.5,6],[-5,6],[0,11],[5,6],[1.5,6],[1.5,2.5]],s=[[2.5,-1.5],[6,-1.5],[6,-5],[11,0],[6,5],[6,1.5],[2.5,1.5]],n={areaOutline:"#fff",resizeBoxStroke:"#fff",resizeBoxFill:"#444",resizeBoxArrowFill:"#fff",resizeCircleStroke:"#fff",resizeCircleFill:"#444",moveIconFill:"#fff"};return function(h){var l=function(n,t,i){return[i*n[0]+t[0],i*n[1]+t[1]]},c=function(n,t,i,r){var f,u,e;h.save();h.fillStyle=t;h.beginPath();u=l(n[0],i,r);h.moveTo(u[0],u[1]);for(e in n)e>0&&(f=l(n[e],i,r),h.lineTo(f[0],f[1]));h.lineTo(u[0],u[1]);h.fill();h.closePath();h.restore()};this.drawIconMove=function(t,i){c(f,n.moveIconFill,t,i);c(e,n.moveIconFill,t,i);c(o,n.moveIconFill,t,i);c(s,n.moveIconFill,t,i)};this.drawIconResizeCircle=function(t,i,r){var u=i*r;h.save();h.strokeStyle=n.resizeCircleStroke;h.lineWidth=2;h.fillStyle=n.resizeCircleFill;h.beginPath();h.arc(t[0],t[1],u,0,2*Math.PI);h.fill();h.stroke();h.closePath();h.restore()};this.drawIconResizeBoxBase=function(t,i,r){var u=i*r;h.save();h.strokeStyle=n.resizeBoxStroke;h.lineWidth=2;h.fillStyle=n.resizeBoxFill;h.fillRect(t[0]-u/2,t[1]-u/2,u,u);h.strokeRect(t[0]-u/2,t[1]-u/2,u,u);h.restore()};this.drawIconResizeBoxNESW=function(t,u,f){this.drawIconResizeBoxBase(t,u,f);c(i,n.resizeBoxArrowFill,t,f);c(r,n.resizeBoxArrowFill,t,f)};this.drawIconResizeBoxNWSE=function(i,r,f){this.drawIconResizeBoxBase(i,r,f);c(t,n.resizeBoxArrowFill,i,f);c(u,n.resizeBoxArrowFill,i,f)};this.drawCropArea=function(t,i,r,u){var f=t.width/h.canvas.width,e=t.height/h.canvas.height,o=i[0]-r/2,s=i[1]-r/2;h.save();h.strokeStyle=n.areaOutline;h.lineWidth=2;h.beginPath();u(h,i,r);h.stroke();h.clip();r>0&&h.drawImage(t,o*f,s*e,r*f,r*e,o,s,r,r);h.beginPath();u(h,i,r);h.stroke();h.clip();h.restore()}}}]);n.service("cropEXIF",[function(){function i(n){return!!n.exifdata}function o(n,t){t=t||n.match(/^data\:([^\;]+)\;base64,/im)[1]||"";n=n.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var r=atob(n),u=r.length,f=new ArrayBuffer(u),e=new Uint8Array(f),i=0;u>i;i++)e[i]=r.charCodeAt(i);return f}function s(n,t){var i=new XMLHttpRequest;i.open("GET",n,!0);i.responseType="blob";i.onload=function(){(200==this.status||0===this.status)&&t(this.response)};i.send()}function h(t,i){function e(n){var r=f(n),u=c(n);t.exifdata=r||{};t.iptcdata=u||{};i&&i.call(t)}var h,r,u;t.src?/^data\:/i.test(t.src)?(h=o(t.src),e(h)):/^blob\:/i.test(t.src)?(u=new FileReader,u.onload=function(n){e(n.target.result)},s(t.src,function(n){u.readAsArrayBuffer(n)})):(r=new XMLHttpRequest,r.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";e(r.response);r=null},r.open("GET",t.src,!0),r.responseType="arraybuffer",r.send(null)):window.FileReader&&(t instanceof window.Blob||t instanceof window.File)&&(u=new FileReader,u.onload=function(t){n&&console.log("Got file of length "+t.target.result.byteLength);e(t.target.result)},u.readAsArrayBuffer(t))}function f(t){var r=new DataView(t),u,i,f;if(n&&console.log("Got file of length "+t.byteLength),255!=r.getUint8(0)||216!=r.getUint8(1))return n&&console.log("Not a valid JPEG"),!1;for(i=2,f=t.byteLength;f>i;){if(255!=r.getUint8(i))return n&&console.log("Not a valid marker at offset "+i+", found: "+r.getUint8(i)),!1;if(u=r.getUint8(i+1),n&&console.log(u),225==u)return n&&console.log("Found 0xFFE1 marker"),v(r,i+4,r.getUint16(i+2)-2);i+=2+r.getUint16(i+2)}}function c(t){var u=new DataView(t),i,f,e;if(n&&console.log("Got file of length "+t.byteLength),255!=u.getUint8(0)||216!=u.getUint8(1))return n&&console.log("Not a valid JPEG"),!1;for(var r=2,o=t.byteLength,s=function(n,t){return 56===n.getUint8(t)&&66===n.getUint8(t+1)&&73===n.getUint8(t+2)&&77===n.getUint8(t+3)&&4===n.getUint8(t+4)&&4===n.getUint8(t+5)};o>r;){if(s(u,r))return i=u.getUint8(r+7),i%2!=0&&(i+=1),0===i&&(i=4),f=r+8+i,e=u.getUint16(r+6+i),l(t,f,e);r++}}function l(n,t,i){for(var h,u,c,l,a,s=new DataView(n),f={},o=t;t+i>o;)28===s.getUint8(o)&&2===s.getUint8(o+1)&&(l=s.getUint8(o+2),l in e&&(c=s.getInt16(o+3),a=c+5,u=e[l],h=r(s,o+5,c),f.hasOwnProperty(u)?f[u]instanceof Array?f[u].push(h):f[u]=[f[u],h]:f[u]=h)),o++;return f}function u(t,i,r,u,f){for(var e,s,c=t.getUint16(r,!f),h={},o=0;c>o;o++)e=r+12*o+2,s=u[t.getUint16(e,!f)],!s&&n&&console.log("Unknown tag: "+t.getUint16(e,!f)),h[s]=a(t,e,i,r,f);return h}function a(n,t,i,u,f){var c,o,v,e,l,a,y=n.getUint16(t+2,!f),s=n.getUint32(t+4,!f),h=n.getUint32(t+8,!f)+i;switch(y){case 1:case 7:if(1==s)return n.getUint8(t+8,!f);for(c=s>4?h:t+8,o=[],e=0;s>e;e++)o[e]=n.getUint8(c+e);return o;case 2:return c=s>4?h:t+8,r(n,c,s-1);case 3:if(1==s)return n.getUint16(t+8,!f);for(c=s>2?h:t+8,o=[],e=0;s>e;e++)o[e]=n.getUint16(c+2*e,!f);return o;case 4:if(1==s)return n.getUint32(t+8,!f);for(o=[],e=0;s>e;e++)o[e]=n.getUint32(h+4*e,!f);return o;case 5:if(1==s)return l=n.getUint32(h,!f),a=n.getUint32(h+4,!f),v=new Number(l/a),v.numerator=l,v.denominator=a,v;for(o=[],e=0;s>e;e++)l=n.getUint32(h+8*e,!f),a=n.getUint32(h+4+8*e,!f),o[e]=new Number(l/a),o[e].numerator=l,o[e].denominator=a;return o;case 9:if(1==s)return n.getInt32(t+8,!f);for(o=[],e=0;s>e;e++)o[e]=n.getInt32(h+4*e,!f);return o;case 10:if(1==s)return n.getInt32(h,!f)/n.getInt32(h+4,!f);for(o=[],e=0;s>e;e++)o[e]=n.getInt32(h+8*e,!f)/n.getInt32(h+4+8*e,!f);return o}}function r(n,t,i){for(var u="",r=t;t+i>r;r++)u+=String.fromCharCode(n.getUint8(r));return u}function v(i,f){var h,c,e,o,l,s,a;if("Exif"!=r(i,f,4))return n&&console.log("Not valid EXIF data! "+r(i,f,4)),!1;if(s=f+6,18761==i.getUint16(s))h=!1;else{if(19789!=i.getUint16(s))return n&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;h=!0}if(42!=i.getUint16(s+2,!h))return n&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(a=i.getUint32(s+4,!h),8>a)return n&&console.log("Not valid TIFF data! (First offset less than 8)",i.getUint32(s+4,!h)),!1;if(c=u(i,s,s+a,p,h),c.ExifIFDPointer){o=u(i,s,s+c.ExifIFDPointer,y,h);for(e in o){switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":o[e]=t[e][o[e]];break;case"ExifVersion":case"FlashpixVersion":o[e]=String.fromCharCode(o[e][0],o[e][1],o[e][2],o[e][3]);break;case"ComponentsConfiguration":o[e]=t.Components[o[e][0]]+t.Components[o[e][1]]+t.Components[o[e][2]]+t.Components[o[e][3]]}c[e]=o[e]}}if(c.GPSInfoIFDPointer){l=u(i,s,s+c.GPSInfoIFDPointer,w,h);for(e in l){switch(e){case"GPSVersionID":l[e]=l[e][0]+"."+l[e][1]+"."+l[e][2]+"."+l[e][3]}c[e]=l[e]}}return c}var n=!1,y=this.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},p=this.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},w=this.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},t=this.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},e={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};this.getData=function(n,t){return(n instanceof Image||n instanceof HTMLImageElement)&&!n.complete?!1:(i(n)?t&&t.call(n):h(n,t),!0)};this.getTag=function(n,t){if(i(n))return n.exifdata[t]};this.getAllTags=function(n){if(!i(n))return{};var t,r=n.exifdata,u={};for(t in r)r.hasOwnProperty(t)&&(u[t]=r[t]);return u};this.pretty=function(n){if(!i(n))return"";var t,r=n.exifdata,u="";for(t in r)r.hasOwnProperty(t)&&(u+="object"==typeof r[t]?r[t]instanceof Number?t+" : "+r[t]+" ["+r[t].numerator+"/"+r[t].denominator+"]\r\n":t+" : ["+r[t].length+" values]\r\n":t+" : "+r[t]+"\r\n");return u};this.readFromBinaryFile=function(n){return f(n)}}]);n.factory("cropHost",["$document","cropAreaCircle","cropAreaSquare","cropEXIF",function(n,t,i,r){var u=function(n){var r=n.getBoundingClientRect(),t=document.body,i=document.documentElement,u=window.pageYOffset||i.scrollTop||t.scrollTop,f=window.pageXOffset||i.scrollLeft||t.scrollLeft,e=i.clientTop||t.clientTop||0,o=i.clientLeft||t.clientLeft||0,s=r.top+u-e,h=r.left+f-o;return{top:Math.round(s),left:Math.round(h)}};return function(f,e,o){function v(){h.clearRect(0,0,h.canvas.width,h.canvas.height);null!==c&&(h.drawImage(c,0,0,h.canvas.width,h.canvas.height),h.save(),h.fillStyle="rgba(0, 0, 0, 0.65)",h.fillRect(0,0,h.canvas.width,h.canvas.height),h.restore(),s.draw())}var h=null,c=null,s=null,a=[100,100],l=[300,300],w=200,k="image/png",d=null,g=function(){if(null!==c){s.setImage(c);var i=[c.width,c.height],t=c.width/c.height,n=i;n[0]>l[0]?(n[0]=l[0],n[1]=n[0]/t):n[0]<a[0]&&(n[0]=a[0],n[1]=n[0]/t);n[1]>l[1]?(n[1]=l[1],n[0]=n[1]*t):n[1]<a[1]&&(n[1]=a[1],n[0]=n[1]*t);f.prop("width",n[0]).prop("height",n[1]).css({"margin-left":-n[0]/2+"px","margin-top":-n[1]/2+"px"});s.setX(h.canvas.width/2);s.setY(h.canvas.height/2);s.setSize(Math.min(200,h.canvas.width/2,h.canvas.height/2))}else f.prop("width",0).prop("height",0).css({"margin-top":0});v()},y=function(n){return angular.isDefined(n.changedTouches)?n.changedTouches:n.originalEvent.changedTouches},p=function(n){if(null!==c){var t,i,r=u(h.canvas);"touchmove"===n.type?(t=y(n)[0].pageX,i=y(n)[0].pageY):(t=n.pageX,i=n.pageY);s.processMouseMove(t-r.left,i-r.top);v()}},b=function(n){if(n.preventDefault(),n.stopPropagation(),null!==c){var t,i,r=u(h.canvas);"touchstart"===n.type?(t=y(n)[0].pageX,i=y(n)[0].pageY):(t=n.pageX,i=n.pageY);s.processMouseDown(t-r.left,i-r.top);v()}},nt=function(n){if(null!==c){var t,i,r=u(h.canvas);"touchend"===n.type?(t=y(n)[0].pageX,i=y(n)[0].pageY):(t=n.pageX,i=n.pageY);s.processMouseUp(t-r.left,i-r.top);v()}};this.getResultImageDataURI=function(){var t,n;return n=angular.element("<canvas><\/canvas>")[0],t=n.getContext("2d"),n.width=w,n.height=w,null!==c&&t.drawImage(c,(s.getX()-s.getSize()/2)*(c.width/h.canvas.width),(s.getY()-s.getSize()/2)*(c.height/h.canvas.height),s.getSize()*(c.width/h.canvas.width),s.getSize()*(c.height/h.canvas.height),0,0,w,w),null!==d?n.toDataURL(k,d):n.toDataURL(k)};this.setNewImageSource=function(n){if(c=null,g(),o.trigger("image-updated"),n){var t=new Image;"http"===n.substring(0,4).toLowerCase()&&(t.crossOrigin="anonymous");t.onload=function(){o.trigger("load-done");r.getData(t,function(){var h=r.getTag(t,"Orientation");if([3,6,8].indexOf(h)>-1){var n=document.createElement("canvas"),l=n.getContext("2d"),u=t.width,f=t.height,e=0,s=0,i=0;switch(h){case 3:e=-t.width;s=-t.height;i=180;break;case 6:u=t.height;f=t.width;s=-t.height;i=90;break;case 8:u=t.height;f=t.width;e=-t.width;i=270}n.width=u;n.height=f;l.rotate(i*Math.PI/180);l.drawImage(t,e,s);c=new Image;c.src=n.toDataURL("image/png")}else c=t;g();o.trigger("image-updated")})};t.onerror=function(){o.trigger("load-error")};o.trigger("load-start");t.src=n}};this.setMaxDimensions=function(n,t){if(l=[n,t],null!==c){var o=h.canvas.width,y=h.canvas.height,p=[c.width,c.height],r=c.width/c.height,i=p;i[0]>l[0]?(i[0]=l[0],i[1]=i[0]/r):i[0]<a[0]&&(i[0]=a[0],i[1]=i[0]/r);i[1]>l[1]?(i[1]=l[1],i[0]=i[1]*r):i[1]<a[1]&&(i[1]=a[1],i[0]=i[1]*r);f.prop("width",i[0]).prop("height",i[1]).css({"margin-left":-i[0]/2+"px","margin-top":-i[1]/2+"px"});var u=h.canvas.width/o,e=h.canvas.height/y,w=Math.min(u,e);s.setX(s.getX()*u);s.setY(s.getY()*e);s.setSize(s.getSize()*w)}else f.prop("width",0).prop("height",0).css({"margin-top":0});v()};this.setAreaMinSize=function(n){n=parseInt(n,10);isNaN(n)||(s.setMinSize(n),v())};this.setResultImageSize=function(n){n=parseInt(n,10);isNaN(n)||(w=n)};this.setResultImageFormat=function(n){k=n};this.setResultImageQuality=function(n){n=parseFloat(n);!isNaN(n)&&n>=0&&1>=n&&(d=n)};this.setAreaType=function(n){var u=s.getSize(),f=s.getMinSize(),e=s.getX(),l=s.getY(),r=t;"square"===n&&(r=i);s=new r(h,o);s.setMinSize(f);s.setSize(u);s.setX(e);s.setY(l);null!==c&&s.setImage(c);v()};h=f[0].getContext("2d");s=new t(h,o);n.on("mousemove",p);f.on("mousedown",b);n.on("mouseup",nt);n.on("touchmove",p);f.on("touchstart",b);n.on("touchend",nt);this.destroy=function(){n.off("mousemove",p);f.off("mousedown",b);n.off("mouseup",p);n.off("touchmove",p);f.off("touchstart",b);n.off("touchend",p);f.remove()}}}]);n.factory("cropPubSub",[function(){return function(){var n={};this.on=function(t,i){return t.split(" ").forEach(function(t){n[t]||(n[t]=[]);n[t].push(i)}),this};this.trigger=function(t,i){return angular.forEach(n[t],function(n){n.call(null,i)}),this}}}]);n.directive("imgCrop",["$timeout","cropHost","cropPubSub",function(n,t,i){return{restrict:"E",scope:{image:"=",resultImage:"=",changeOnFly:"=",areaType:"@",areaMinSize:"=",resultImageSize:"=",resultImageFormat:"@",resultImageQuality:"=",onChange:"&",onLoadBegin:"&",onLoadDone:"&",onLoadError:"&"},template:"<canvas><\/canvas>",controller:["$scope",function(n){n.events=new i}],link:function(i,r){var o,s=i.events,u=new t(r.find("canvas"),{},s),f=function(n){var t=u.getResultImageDataURI();o!==t&&(o=t,angular.isDefined(n.resultImage)&&(n.resultImage=t),n.onChange({$dataURI:n.resultImage}))},e=function(t){return function(){n(function(){i.$apply(function(n){t(n)})})}};s.on("load-start",e(function(n){n.onLoadBegin({})})).on("load-done",e(function(n){n.onLoadDone({})})).on("load-error",e(function(n){n.onLoadError({})})).on("area-move area-resize",e(function(n){n.changeOnFly&&f(n)})).on("area-move-end area-resize-end image-updated",e(function(n){f(n)}));i.$watch("image",function(){u.setNewImageSource(i.image)});i.$watch("areaType",function(){u.setAreaType(i.areaType);f(i)});i.$watch("areaMinSize",function(){u.setAreaMinSize(i.areaMinSize);f(i)});i.$watch("resultImageSize",function(){u.setResultImageSize(i.resultImageSize);f(i)});i.$watch("resultImageFormat",function(){u.setResultImageFormat(i.resultImageFormat);f(i)});i.$watch("resultImageQuality",function(){u.setResultImageQuality(i.resultImageQuality);f(i)});i.$watch(function(){return[r[0].clientWidth,r[0].clientHeight]},function(n){u.setMaxDimensions(n[0],n[1]);f(i)},!0);i.$on("$destroy",function(){u.destroy()})}}}])}();angular.module("frapontillo.bootstrap-switch",[]).directive("bsSwitch",["$timeout",function(n){return{restrict:"EA",require:"ngModel",template:"<input>",replace:!0,scope:{switchActive:"@",switchSize:"@",switchOn:"@",switchOff:"@",switchOnLabel:"@",switchOffLabel:"@",switchLabel:"@",switchIcon:"@",switchAnimate:"@"},link:function(t,i,r,u){var f=function(){u.$formatters.push(function(t){t!==undefined&&n(function(){i.bootstrapSwitch("setState",t||!1,!0)})});t.$watch("switchActive",function(n){var t=n===!0||n==="true"||!n;i.bootstrapSwitch("setDisabled",!t)});t.$watch("switchOnLabel",function(n){i.bootstrapSwitch("setOnLabel",n||"Yes")});t.$watch("switchOffLabel",function(n){i.bootstrapSwitch("setOffLabel",n||"No")});t.$watch("switchOn",function(n){r.dataOn=n;i.bootstrapSwitch("setOnClass",n||"")});t.$watch("switchOff",function(n){r.dataOff=n;i.bootstrapSwitch("setOffClass",n||"")});t.$watch("switchAnimate",function(n){i.bootstrapSwitch("setAnimated",t.$eval(n||"true"))});t.$watch("switchSize",function(n){i.bootstrapSwitch("setSizeClass",t.getSizeClass(n))});t.$watch("switchLabel",function(n){i.bootstrapSwitch("setTextLabel",n)});t.$watch("switchIcon",function(n){i.bootstrapSwitch("setTextIcon",n)})},e=function(){i.on("switch-change",function(n,i){t.$apply(function(){u.$setViewValue(i.value)})})};t.getSizeClass=function(){return r.switchSize?"switch-"+r.switchSize:""};f();e();i.bootstrapSwitch();n(function(){i.bootstrapSwitch("setState",u.$modelValue||!1,!0)});t.$on("$destroy",function(){i.bootstrapSwitch("destroy")})}}}]),function(n,t){if(typeof define=="function"&&define.amd)define(["angular"],function(n){return t(n)});else return t(n)}(angular||null,function(n){var t=n.module("ngTable",[]),i;return t.factory("ngTableParams",["$q","$log",function(t,i){var r=function(n){return!isNaN(parseFloat(n))&&isFinite(n)};return function(u,f){var s=this,e,o;return this.data=[],this.parameters=function(t,u){var f,s,l,o,h,v,a,c;if(u=u||!1,n.isDefined(t)){for(f in t)if(s=t[f],u&&f.indexOf("[")>=0){for(l=f.split(/\[(.*)\]/).reverse(),o="",h=0,v=l.length;h<v;h++)a=l[h],a!==""&&(c=s,s={},s[o=a]=r(c)?parseFloat(c):c);o==="sorting"&&(e[o]={});e[o]=n.extend(e[o]||{},s[o])}else e[f]=r(t[f])?parseFloat(t[f]):t[f];return i.debug&&i.debug("ngTable: set parameters",e),this}return e},this.settings=function(t){return n.isDefined(t)?(n.isArray(t.data)&&(t.total=t.data.length),o=n.extend(o,t),i.debug&&i.debug("ngTable: set settings",o),this):o},this.page=function(t){return n.isDefined(t)?this.parameters({page:t}):e.page},this.total=function(t){return n.isDefined(t)?this.settings({total:t}):o.total},this.count=function(t){return n.isDefined(t)?this.parameters({count:t,page:1}):e.count},this.filter=function(t){return n.isDefined(t)?this.parameters({filter:t}):e.filter},this.sorting=function(t){if(arguments.length==2){var i={};return i[t]=arguments[1],this.parameters({sorting:i}),this}return n.isDefined(t)?this.parameters({sorting:t}):e.sorting},this.isSortBy=function(t,i){return n.isDefined(e.sorting[t])&&e.sorting[t]==i},this.orderBy=function(){var n=[];for(var t in e.sorting)n.push((e.sorting[t]==="asc"?"+":"-")+t);return n},this.getData=function(t,i){n.isArray(this.data)&&n.isObject(i)?t.resolve(this.data.slice((i.page()-1)*i.count(),i.page()*i.count())):t.resolve([])},this.getGroups=function(r,u){var f=t.defer();f.promise.then(function(t){var f={},e,o;n.forEach(t,function(t){var i=n.isFunction(u)?u(t):t[u];f[i]=f[i]||{data:[]};f[i].value=i;f[i].data.push(t)});e=[];for(o in f)e.push(f[o]);i.debug&&i.debug("ngTable: refresh groups",e);r.resolve(e)});this.getData(f,s)},this.generatePagesArray=function(n,t,i){var h,o,s,e,u,f,r;if(h=11,f=[],u=Math.ceil(t/i),u>1){for(f.push({type:"prev",number:Math.max(1,n-1),disabled:n===1}),f.push({type:"first",number:1,active:n===1}),s=Math.round((h-5)/2),e=Math.max(2,n-s),o=Math.min(u-1,n+s*2-(n-e)),e=Math.max(2,e-(s*2-(o-e))),r=e;r<=o;)r===e&&r!==2||r===o&&r!==u-1?f.push({type:"more",active:!1}):f.push({type:"page",number:r,active:n===r}),r++;f.push({type:"last",number:u,active:n===u});f.push({type:"next",number:Math.min(u,n+1),disabled:n===u})}return f},this.url=function(t){var r,i,f,u,o;t=t||!1;r=t?[]:{};for(key in e)if(e.hasOwnProperty(key))if(i=e[key],f=encodeURIComponent(key),typeof i=="object")for(u in i)n.isUndefined(i[u])||i[u]===""||(o=f+"["+encodeURIComponent(u)+"]",t?r.push(o+"="+i[u]):r[o]=i[u]);else n.isFunction(i)||n.isUndefined(i)||i===""||(t?r.push(f+"="+encodeURIComponent(i)):r[f]=encodeURIComponent(i));return r},this.reload=function(){var r=t.defer(),n=this;o.$loading=!0;o.groupBy?o.getGroups(r,o.groupBy,this):o.getData(r,this);i.debug&&i.debug("ngTable: reload data");r.promise.then(function(t){o.$loading=!1;i.debug&&i.debug("ngTable: current scope",o.$scope);n.data=o.groupBy?o.$scope.$groups=t:o.$scope.$data=t;o.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())})},this.reloadPages=function(){var n=this;o.$scope.pages=n.generatePagesArray(n.page(),n.total(),n.count())},e=this.$params={page:1,count:1,filter:{},sorting:{},group:{},groupBy:null},o={$scope:null,$loading:!1,data:null,total:0,counts:[10,25,50,100],getGroups:this.getGroups,getData:this.getData},this.settings(f),this.parameters(u,!0),this}}]),i=["$scope","ngTableParams","$q","$timeout",function(n,t,i,r){n.$loading=!1;n.params||(n.params=new t);n.params.settings().$scope=n;var u;n.$watch("params.$params",function(){u&&r.cancel(u);u=r(function(){n.params.settings().$scope=n;n.params.reload()},500)},!0);n.sortBy=function(t,i){var r=n.parse(t.sortable),f,u;r&&(f=n.params.sorting()&&n.params.sorting()[r]&&n.params.sorting()[r]==="desc",u=i.ctrlKey?n.params.sorting():{},u[r]=f?"asc":"desc",n.params.parameters({sorting:u}))}}],t.directive("ngTable",["$compile","$q","$parse",function(t,r,u){"use strict";return{restrict:"A",priority:1001,scope:!0,controller:i,compile:function(i){var r=[],o=0,f=null,e=i.find("thead");if(n.forEach(n.element(i.find("tr")),function(t){t=n.element(t);t.hasClass("ng-table-group")||f||(f=t)}),f)return n.forEach(f.find("td"),function(t){var i=n.element(t);if(!i.attr("ignore-cell")||"true"!==i.attr("ignore-cell")){var e=function(n,t){return function(f){return u(i.attr("x-data-"+n)||i.attr("data-"+n)||i.attr(n))(f,{$columns:r})||t}},s=e("title"," "),l=e("header",!1),f=e("filter",!1)(),h=!1,c=!1;f&&f.filterName&&(c=f.filterName,delete f.filterName);f&&f.templateURL&&(h=f.templateURL,delete f.templateURL);i.attr("data-title-text",s());r.push({id:o++,title:s,sortable:e("sortable",!1),"class":i.attr("x-data-header-class")||i.attr("data-header-class")||i.attr("header-class"),filter:f,filterTemplateURL:h,filterName:c,headerTemplateURL:l,filterData:i.attr("filter-data")?i.attr("filter-data"):null,show:i.attr("ng-show")?function(n){return u(i.attr("ng-show"))(n)}:function(){return!0}})}}),function(i,f,o){var s,h,c;return i.$loading=!1,i.$columns=r,i.$watch(o.ngTable,function(t){n.isUndefined(t)||(i.paramsModel=u(o.ngTable),i.params=t)},!0),i.parse=function(t){return n.isDefined(t)?t(i):""},o.showFilter&&i.$parent.$watch(o.showFilter,function(n){i.show_filter=n}),n.forEach(r,function(t){var r;if(t.filterData){if(r=u(t.filterData)(i,{$column:t}),!(n.isObject(r)&&n.isObject(r.promise)))throw new Error("Function "+t.filterData+" must be instance of $q.defer()");return delete t.filterData,r.promise.then(function(i){n.isArray(i)||(i=[]);i.unshift({title:"-",id:""});t.data=i})}}),f.hasClass("ng-table")?void 0:(i.templates={header:o.templateHeader?o.templateHeader:"ng-table/header.html",pagination:o.templatePagination?o.templatePagination:"ng-table/pager.html"},s=e.length>0?e:n.element(document.createElement("thead")).attr("ng-include","templates.header"),h=n.element(document.createElement("div")).attr("ng-include","templates.pagination"),f.find("thead").remove(),c=f.find("tbody"),f.prepend(s),t(s)(i),t(h)(i),f.addClass("ng-table"),f.after(h))}}}}]),n.module("ngTable").run(["$templateCache",function(n){n.put("ng-table/filters/select-multiple.html",'<select title="Select all..." ng-options="data.id as data.title for data in column.data" multiple ng-multiple="true" ng-model="params.filter()[name]" ng-show="filter==\'select-multiple\'" class="filter filter-select-multiple form-control" name="{{column.filterName}}"> <\/select>');n.put("ng-table/filters/select.html",'<select ng-options="data.id as data.title for data in column.data" ng-model="params.filter()[name]" ng-show="filter==\'select\'" class="filter filter-select form-control" name="{{column.filterName}}"> <\/select>');n.put("ng-table/filters/text.html",'<input type="text" name="{{column.filterName}}" ng-model="params.filter()[name]" ng-if="filter==\'text\'" class="input-filter form-control"/>');n.put("ng-table/header.html",'<tr> <th ng-repeat="column in $columns" ng-class="{ \'sortable\': parse(column.sortable), \'sort-asc\': params.sorting()[parse(column.sortable)]==\'asc\', \'sort-desc\': params.sorting()[parse(column.sortable)]==\'desc\' }" ng-click="sortBy(column, $event)" ng-show="column.show(this)" ng-init="template=column.headerTemplateURL(this)" class="header {{column.class}}" uib-tooltip="{{parse(column.sortable) ? \'Click to sort by \' + parse(column.title) : \'\'}}" tooltip-append-to-body="true" tooltip-placement="bottom"> <div ng-if="!template" ng-show="!template" ng-bind="parse(column.title)"><\/div> <div ng-if="template" ng-show="template"><div ng-include="template"><\/div><\/div> <\/th> <\/tr> <tr ng-show="show_filter" class="ng-table-filters"> <th ng-repeat="column in $columns" ng-show="column.show(this)" class="filter"> <div ng-repeat="(name, filter) in column.filter"> <div ng-if="column.filterTemplateURL" ng-show="column.filterTemplateURL"> <div ng-include="column.filterTemplateURL"><\/div> <\/div> <div ng-if="!column.filterTemplateURL" ng-show="!column.filterTemplateURL"> <div ng-include="\'ng-table/filters/\' + filter + \'.html\'"><\/div> <\/div> <\/div> <\/th> <\/tr>');n.put("ng-table/pager.html",'<div class="ng-cloak ng-table-pager"> <div ng-if="params.settings().counts.length" class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type="button" ng-class="{\'active\':params.count()==count}" ng-click="params.count(count)" class="btn btn-default"> <span ng-bind="count"><\/span> <\/button> <\/div> <ul class="pagination ng-table-pagination"><li ng-class="{\'disabled\': page.disabled, \'active\': page.active}" ng-repeat="page in pages" ng-switch="page.type"> <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo;<\/a> <a ng-switch-when="first" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="page" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="more" ng-click="params.page(page.number)" href="">&#8230;<\/a> <a ng-switch-when="last" ng-click="params.page(page.number)" href=""><span ng-bind="page.number"><\/span><\/a> <a ng-switch-when="next" ng-click="params.page(page.number)" href="">&raquo;<\/a> <\/li> <\/ul> <\/div> ')}]),t});angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["uiTinymceConfig",function(n){tinyMCE.baseURL="/assets/scripts/lib/ui.tinymce/4.6.3";n=n||{};var t=0;return{priority:10,require:"ngModel",link:function(i,r,u,f){var o,l,s,e,h=function(){f.$setViewValue(r.val());i.$root.$$phase||i.$apply()},c;u.id||u.$set("id","uiTinymce"+t++);o=u.uiTinymce?i.$eval(u.uiTinymce):{};l=u.ngDisabled?i.$eval(u.ngDisabled):!1;o.setup&&(c=o.setup,delete o.setup);s={readonly:l,setup:function(n){n.on("init",function(){f.$render();f.$setPristine()});n.on("ExecCommand",function(){n.save();h()});n.on("KeyUp",function(){n.save();h()});n.on("SetContent",function(t){t.initial||f.$viewValue===t.content||(n.save(),h())});n.on("Change",function(){n.save();h()});n.on("blur",function(){r.blur()});n.on("ObjectResized",function(){n.save();h()});c&&c(n)},mode:"exact",elements:u.id,invalid_elements:"script"};angular.extend(s,n,o);setTimeout(function(){tinymce.init(s)});f.$render=function(){e||(e=tinymce.get(u.id));e&&e.setContent(f.$viewValue||"")};u.$observe("disabled",function(n){e||(e=tinymce.get(u.id));e&&(e.remove(),e=null,s.readonly=n,tinymce.init(s))});i.$on("$destroy",function(){e||(e=tinymce.get(u.id));e&&(e.remove(),e=null)})}}}]);"use strict";var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};(function(n,t){(typeof exports=="undefined"?"undefined":_typeof(exports))==="object"&&(typeof module=="undefined"?"undefined":_typeof(module))==="object"?module.exports=t(require("angular")):typeof define=="function"&&define.amd?define(["angular"],t):(typeof exports=="undefined"?"undefined":_typeof(exports))==="object"?exports["http-etag"]=t(require("angular")):n["http-etag"]=t(n.angular)})(window,function(n){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={i:r,l:!1,exports:{}};return n[r].call(u.exports,u,u.exports,t),u.l=!0,u.exports}var i={};return t.m=n,t.c=i,t.d=function(n,i,r){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:r})},t.r=function(n){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"});Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){var r,u;if((i&1&&(n=t(n)),i&8)||i&4&&(typeof n=="undefined"?"undefined":_typeof(n))==="object"&&n&&n.__esModule)return n;if(r=Object.create(null),t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),i&2&&typeof n!="string")for(u in n)t.d(r,u,function(t){return n[t]}.bind(null,u));return r},t.n=function(n){var i=n&&n.__esModule?function(){return n["default"]}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},t.p="",t(t.s=6)}([function(t){t.exports=n},function(n){n.exports=function(n,i){var u,r,f;if(n.map)return n.map(i);for(u=[],r=0;r<n.length;r++)f=n[r],t.call(n,r)&&u.push(i(f,r,n));return u};var t=Object.prototype.hasOwnProperty},function(n,t,i){(function(t){(function(t,i){n.exports=i()})(this,function(){"use strict";function nt(t){var v=typeof t=="undefined"?"undefined":_typeof(t),u,r;if(v!=="object")return v;if(t===null)return"null";if(t===h)return"global";if(Array.isArray(t)&&(f===!1||!(Symbol.toStringTag in t)))return"Array";if((typeof window=="undefined"?"undefined":_typeof(window))==="object"&&window!==null){if(_typeof(window.location)==="object"&&t===window.location)return"Location";if(_typeof(window.document)==="object"&&t===window.document)return"Document";if(_typeof(window.navigator)==="object"){if(_typeof(window.navigator.mimeTypes)==="object"&&t===window.navigator.mimeTypes)return"MimeTypeArray";if(_typeof(window.navigator.plugins)==="object"&&t===window.navigator.plugins)return"PluginArray"}if((typeof HTMLElement=="function"||_typeof(window.HTMLElement)==="object")&&t instanceof window.HTMLElement){if(t.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(t.tagName==="TD")return"HTMLTableDataCellElement";if(t.tagName==="TH")return"HTMLTableHeaderCellElement"}}return(u=f&&t[Symbol.toStringTag],typeof u=="string")?u:(r=Object.getPrototypeOf(t),r===RegExp.prototype)?"RegExp":r===Date.prototype?"Date":s&&r===Promise.prototype?"Promise":i&&r===Set.prototype?"Set":n&&r===Map.prototype?"Map":l&&r===WeakSet.prototype?"WeakSet":c&&r===WeakMap.prototype?"WeakMap":a&&r===DataView.prototype?"DataView":n&&r===w?"Map Iterator":i&&r===p?"Set Iterator":e&&r===b?"Array Iterator":o&&r===k?"String Iterator":r===null?"Object":Object.prototype.toString.call(t).slice(d,g)}var s=typeof Promise=="function",h=(typeof self=="undefined"?"undefined":_typeof(self))==="object"?self:t,r=typeof Symbol!="undefined",n=typeof Map!="undefined",i=typeof Set!="undefined",c=typeof WeakMap!="undefined",l=typeof WeakSet!="undefined",a=typeof DataView!="undefined",u=r&&typeof Symbol.iterator!="undefined",f=r&&typeof Symbol.toStringTag!="undefined",v=i&&typeof Set.prototype.entries=="function",y=n&&typeof Map.prototype.entries=="function",p=v&&Object.getPrototypeOf((new Set).entries()),w=y&&Object.getPrototypeOf((new Map).entries()),e=u&&typeof Array.prototype[Symbol.iterator]=="function",b=e&&Object.getPrototypeOf([][Symbol.iterator]()),o=u&&typeof String.prototype[Symbol.iterator]=="function",k=o&&Object.getPrototypeOf(""[Symbol.iterator]()),d=8,g=-1;return nt})}).call(this,i(4))},function(n,t,i){"use strict";var r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,c=Array.prototype.slice,s=i(5),h=Object.prototype.propertyIsEnumerable,l=!h.call({toString:null},"toString"),a=h.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=function(n){var t=n.constructor;return t&&t.prototype===n},v={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},y=function(){if(typeof window=="undefined")return!1;for(var n in window)try{if(!v["$"+n]&&r.call(window,n)&&window[n]!==null&&_typeof(window[n])==="object")try{e(window[n])}catch(t){return!0}}catch(t){return!0}return!1}(),p=function(n){if(typeof window=="undefined"||!y)return e(n);try{return e(n)}catch(t){return!1}},f=function(n){var c=n!==null&&(typeof n=="undefined"?"undefined":_typeof(n))==="object",v=o.call(n)==="[object Function]",y=s(n),k=c&&o.call(n)==="[object String]",i=[],w,f,e,h,b,t;if(!c&&!v&&!y)throw new TypeError("Object.keys called on a non-object");if(w=a&&v,k&&n.length>0&&!r.call(n,0))for(f=0;f<n.length;++f)i.push(String(f));if(y&&n.length>0)for(e=0;e<n.length;++e)i.push(String(e));else for(h in n)w&&h==="prototype"||!r.call(n,h)||i.push(String(h));if(l)for(b=p(n),t=0;t<u.length;++t)b&&u[t]==="constructor"||!r.call(n,u[t])||i.push(u[t]);return i};f.shim=function(){var t,n;return Object.keys?(t=function(){return(Object.keys(arguments)||"").length===2}(1,2),t||(n=Object.keys,Object.keys=function(t){return s(t)?n(c.call(t)):n(t)})):Object.keys=f,Object.keys||f};n.exports=f},function(n){var t=function(){return this}();try{t=t||Function("return this")()||eval("this")}catch(i){(typeof window=="undefined"?"undefined":_typeof(window))==="object"&&(t=window)}n.exports=t},function(n){"use strict";var t=Object.prototype.toString;n.exports=function(n){var r=t.call(n),i=r==="[object Arguments]";return i||(i=r!=="[object Array]"&&n!==null&&(typeof n=="undefined"?"undefined":_typeof(n))==="object"&&typeof n.length=="number"&&n.length>=0&&t.call(n.callee)==="[object Function]"),i}},function(n,t,i){"use strict";function e(n){return ft(n)?"Buffer":rt(n)}function ot(n,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,r=i||e(n);switch(r){case"Arguments":case"Array":case"Object":return n[t];case"Map":return n.get(t);case"Set":return t}}function s(n){return a.has(n)}function v(n,t,i){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null,u=r||e(n);switch(u){case"Arguments":case"Array":case"Object":n[t]=i;break;case"Map":n.set(t,i);break;case"Set":n.add(i)}return n}function st(n){return n.slice(0)}function ht(n){return new Boolean(n.valueOf())}function ct(n){return new DataView(n.buffer)}function lt(n){return et(n)}function at(n){return new Date(n.getTime())}function vt(n){return new Number(n)}function yt(n){return new RegExp(n.source||"(?:)",n.flags)}function pt(n){return new String(n)}function f(n,t){return y[t].from(n)}function u(n){return n}function p(){return[]}function wt(){return new Map}function bt(){return{}}function kt(){return new Set}function dt(){}function h(n){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,f=arguments.length>2&&arguments[2]!==undefined?arguments[2]:dt,t,r,u;return(arguments.length===2&&typeof i=="function"&&(f=i,i=null),t=i||e(n),r=w.get(t),t==="Object"&&(u=f(n,t),u!==undefined))?u:r?r(n,t):n}function gt(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};typeof t=="function"&&(t={customizer:t});var f=t,i=f.customizer,r=e(n);if(!s(r))return c(n,null,null,null,i);var u=h(n,r,i),o=new WeakMap([[n,u]]),l=new WeakSet([n]);return c(n,u,o,l,i)}function c(n,t,i,r,u){var k,o=e(n),tt=h(n,o),l,a,nt,y,f,w,b;if(!s(o))return tt;l=void 0;switch(o){case"Arguments":case"Array":l=Object.keys(n);break;case"Object":l=Object.keys(n);(k=l).push.apply(k,_toConsumableArray(Object.getOwnPropertySymbols(n)));break;case"Map":case"Set":l=n.keys()}var p=!0,d=!1,g=undefined;try{for(a=l[Symbol.iterator]();!(p=(nt=a.next()).done);p=!0)y=nt.value,f=ot(n,y,o),r.has(f)?v(t,y,i.get(f),o):(w=e(f),b=h(f,w),s(w)&&(i.set(f,b),r.add(f)),v(t,y,c(f,b,i,r,u),o))}catch(it){d=!0;g=it}finally{try{!p&&a.return&&a.return()}finally{if(d)throw g;}}return t}function ni(){var n=this,e=["createCache","getCache"],o=["setItem","getItem","removeItem","removeAllItems"],s=e.concat(o),i={},t={},f="httpEtagCache",u={deepCopy:!1,cacheResponseData:!0,cacheService:"$cacheFactory",cacheOptions:{number:25}};n.setDefaultCacheConfig=function(t){return u=r.a.extend({},u,t),n};n.getDefaultCacheConfig=function(){return u};n.defineCache=function(i,f){return f=r.a.extend({},u,f,{id:i}),t[i]=f,n};n.defineCacheServiceAdapter=function(t,u){if(!u)throw new Error("Missing cache service adapter configuration");if(!u.methods)throw new Error("Missing cache service adapter configuration methods");return r.a.forEach(s,function(n){if(typeof u.methods[n]!="function")throw new Error('Expected cache service adapter method "'+n+'" to be a function');}),i[t]=u,n};n.getCacheServiceAdapter=function(n){return i[n]};n.$get=["$injector",function(u){function v(n){var t=typeof n=="undefined"?"undefined":_typeof(n),i=t==="number"||t==="string"&&!!n;return i?n:f}var s={},l={},h={},a={},c={};return t[f]||n.defineCache(f),r.a.forEach(i,function(n,t){var i,f;try{i=window[t]}catch(o){}if(!i)try{i=u.get(t)}catch(o){}i||t==="localStorage"&&(i=u.get("torusCache"));l[t]=i;f=h[t]={};r.a.forEach(e,function(t){f[t]=r.a.bind({},n.methods[t],i)})}),r.a.forEach(t,function(n,u){h[n.cacheService].createCache(u,n);var l=a[u]=h[n.cacheService].getCache(u),f=c[u]={},v=i[n.cacheService].config.storesDeepCopies,y=!v&&t[u].deepCopy,e=function(n){return y?gt(n):n};r.a.forEach(o,function(t){var u=i[n.cacheService].methods[t],s,o;t==="getItem"&&(s=function(n,t,i){var r=u(n,t,i);return r&&e(r.responseData)},o=function(n,t,i){return e(u(n,t,i))});t==="setItem"&&(s=function(n,t,i,r){var o=f.$getItem(t);i=e(i);o&&(typeof o=="undefined"?"undefined":_typeof(o))==="object"?(o.responseData=i,i=o):i={responseData:i};u(n,t,i,r)},o=function(n,t,i,r){u(n,t,e(i),r)});f[t]=r.a.bind({},s||u,l);o&&(f["$"+t]=r.a.bind({},o,l))});f.unsetItem=function(n){f.setItem(n,undefined)};f.expireItem=function(n){var t=f.$getItem(n);delete t.etagHeader;f.$setItem(n,t)};f.getItemCache=function(n){return s.getItemCache(u,n)};f.info=function(){return t[u]};f.isCache=!0}),s.info=function(){return t},s.getCache=function(n){var t=c[v(n)];if(t)return t},s.getItemCache=function(n,t){var u=s.getCache(n),i={},f;if(u)return f=[["set","setItem"],["get","getItem"],["$set","$setItem"],["$get","$getItem"],["unset","unsetItem"],["expire","expireItem"],["remove","removeItem"]],r.a.forEach(f,function(n){i[n[0]]=r.a.bind({},u[n[1]],t)}),i.info=function(){var n=u.info();return n.itemKey=t,n},i.isItemCache=!0,i},s.purgeCaches=function(){r.a.forEach(c,function(n){n.removeAllItems()})},s}]}function l(n,t){function i(n){function w(t){var r=t.then,u=t.success;return t.cached=v?function(r){return f&&y.cacheResponseData&&r(p,"cached",undefined,n,i),t}:function(){throw new Error("The method `cached` on the promise returned from `$http` has been disabled in favor of `ifCached`.");},t.ifCached=function(r){return f&&y.cacheResponseData&&r({data:p,status:"cached",headers:undefined,config:n},i),t},t.then=function(n,u,f){function o(t){return n(t,i)}function s(n){return u(n,i)}var e=r.apply(t,[n?o:undefined,u?s:undefined,f]);return w(e)},v&&i&&(t.success=function(n){var r=h(n,undefined,undefined,undefined,undefined,i);return u.apply(t,[r])}),t}var v=l.useLegacyPromiseExtensions(),b=!!n.etagCache,k=e.indexOf(n.method)>=0,d=b&&k,c,s,i;if(d&&(s=o(n),s)){if(i=t.getItemCache(s.id,s.itemKey),!i)throw new Error("No defined ETag caches match specified cache ID");var y=i.info(),f=i.$get(),a=f&&f.etagHeader,p=a&&f.responseData;n.$$_itemCache=i;a&&(n.headers=r.a.extend({},n.headers,{"If-None-Match":a}))}return c=u.apply(u,arguments),w(c),c}function o(n){var t=n.etagCache,r=typeof t=="undefined"?"undefined":_typeof(t),i={},u,e;if(r==="function"&&(t=t(n),r=typeof t=="undefined"?"undefined":_typeof(t)),r==="object")t.isCache?(u=t.info().id,e=f(n)):t.isItemCache?(u=t.info().id,e=t.info().itemKey):(u=t.id,e=t.itemKey||f(n)),i.id=u,i.itemKey=e;else if(r==="string")i.id=t,i.itemKey=f(n);else if(t===!0)i.itemKey=f(n);else return;return i}function f(n){var i=n.url,t=s(n.params),r=t&&i.indexOf("?")>0?"&":"?",u=t&&r+t||"";return i+u}function s(n){return n?k()(ii()(n).sort(),function(t){var i=n[t];return r.a.isArray(i)?k()(i.sort(),function(n){return encodeURIComponent(t)+"="+encodeURIComponent(n)}).join("&"):encodeURIComponent(t)+"="+encodeURIComponent(i)}).join("&"):""}function h(n){var t=Array.prototype.slice.call(arguments,1);return function(){for(var r=0,i=0;i<t.length&&r<arguments.length;i++)t[i]===undefined&&(t[i]=arguments[r++]);return n.apply(this,t)}}var u=n,e=["GET","JSONP"];return r.a.forEach(e,function(n){var t=n.toLowerCase();i[t]=function(t,f){return f=r.a.extend({},f,{method:n,url:t}),i.call(u,f)}}),r.a.forEach(u,function(n,t){i[t]||(i[t]=n)}),i}function ui(){function n(n){var t=n.config.$$_itemCache;if(t){var u=t.info(),f=u.cacheResponseData,r=n.headers().etag,i={};r&&(i.etagHeader=r,f&&(i.responseData=n.data),t.$set(i));delete n.config.$$_itemCache}return n}return{response:n}}function tt(n){n.defineCacheServiceAdapter("$cacheFactory",{config:{storesDeepCopies:!1},methods:{createCache:function(n,t,i){n(t,i)},getCache:function(n,t){return n.get(t)},setItem:function(n,t,i){n.put(t,i)},getItem:function(n,t){return n.get(t)},removeItem:function(n,t){n.remove(t)},removeAllItems:function(n){n.removeAll()}}}).defineCacheServiceAdapter("localStorage",{config:{storesDeepCopies:!0},methods:{createCache:r.a.noop,getCache:function(n,t){return t},setItem:function(n,t,i){try{t=n+":"+t;localStorage.setItem(t,JSON.stringify(i))}catch(r){}},getItem:function(n,t){return t=n+":"+t,JSON.parse(localStorage.getItem(t))},removeItem:function(n,t){t=n+":"+t;localStorage.removeItem(t)},removeAllItems:function(n){var t=n+":";r.a.forEach(localStorage,function(n,i){i.indexOf(t)===0&&localStorage.removeItem(i)})}}}).defineCacheServiceAdapter("sessionStorage",{config:{storesDeepCopies:!0},methods:{createCache:r.a.noop,getCache:function(n,t){return t},setItem:function(n,t,i){try{t=n+":"+t;sessionStorage.setItem(t,JSON.stringify(i))}catch(r){}},getItem:function(n,t){return t=n+":"+t,JSON.parse(sessionStorage.getItem(t))},removeItem:function(n,t){t=n+":"+t;sessionStorage.removeItem(t)},removeAllItems:function(n){var t=n+":";r.a.forEach(sessionStorage,function(n,i){i.indexOf(t)===0&&sessionStorage.removeItem(i)})}}})}var a,y,w,b,g,nt,fi;i.r(t);var it=i(0),r=i.n(it),rt=i(2),o=typeof Buffer!="undefined",ut=o&&typeof Buffer.from!="undefined",ft=o?function(n){return Buffer.isBuffer(n)}:function(){return!1},et=ut?function(n){return Buffer.from(n)}:o?function(n){return new Buffer(n)}:function(n){return n};a=new Set(["Arguments","Array","Map","Object","Set"]);y=Function("return this")();w=new Map([["ArrayBuffer",st],["Boolean",ht],["Buffer",lt],["DataView",ct],["Date",at],["Number",vt],["RegExp",yt],["String",pt],["Float32Array",f],["Float64Array",f],["Int16Array",f],["Int32Array",f],["Int8Array",f],["Uint16Array",f],["Uint32Array",f],["Uint8Array",f],["Uint8ClampedArray",f],["Array Iterator",u],["Map Iterator",u],["Promise",u],["Set Iterator",u],["String Iterator",u],["function",u],["global",u],["WeakMap",u],["WeakSet",u],["boolean",u],["null",u],["number",u],["string",u],["symbol",u],["undefined",u],["Arguments",p],["Array",p],["Map",wt],["Object",bt],["Set",kt]]);b=ni;var ti=i(3),ii=i.n(ti),ri=i(1),k=i.n(ri),d=l;l.$inject=["$delegate","httpEtag"];g=ui;nt=tt;tt.$inject=["httpEtagProvider"];fi=t["default"]=r.a.module("http-etag",[]).provider("httpEtag",b).config(nt).config(["$provide","$httpProvider",function(n,t){d.useLegacyPromiseExtensions=t.useLegacyPromiseExtensions||function(){return r.a.version.major===1&&r.a.version.minor<6};n.decorator("$http",d);t.interceptors.push(g)}]).name}])})